function des(key,message,encrypt,mode,iv,padding){encrypt&&(message=unescape(encodeURIComponent(message)));var i,j,temp,right1,right2,left,right,looping,cbcleft,cbcleft2,cbcright,cbcright2,endloop,loopinc,spfunction1=new Array(16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756),spfunction2=new Array(-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344),spfunction3=new Array(520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584),spfunction4=new Array(8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928),spfunction5=new Array(256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080),spfunction6=new Array(536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312),spfunction7=new Array(2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154),spfunction8=new Array(268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696),keys=des_createKeys(key),m=0,len=message.length,chunk=0,iterations=32==keys.length?3:9;looping=3==iterations?encrypt?new Array(0,32,2):new Array(30,-2,-2):encrypt?new Array(0,32,2,62,30,-2,64,96,2):new Array(94,62,-2,32,64,2,30,-2,-2),2==padding?message+="        ":1==padding?encrypt&&(temp=8-len%8,message+=String.fromCharCode(temp,temp,temp,temp,temp,temp,temp,temp),8===temp&&(len+=8)):padding||(message+="\0\0\0\0\0\0\0\0");var result="",tempresult="";for(1==mode&&(cbcleft=iv.charCodeAt(m++)<<24|iv.charCodeAt(m++)<<16|iv.charCodeAt(m++)<<8|iv.charCodeAt(m++),cbcright=iv.charCodeAt(m++)<<24|iv.charCodeAt(m++)<<16|iv.charCodeAt(m++)<<8|iv.charCodeAt(m++),m=0);m<len;){for(left=message.charCodeAt(m++)<<24|message.charCodeAt(m++)<<16|message.charCodeAt(m++)<<8|message.charCodeAt(m++),right=message.charCodeAt(m++)<<24|message.charCodeAt(m++)<<16|message.charCodeAt(m++)<<8|message.charCodeAt(m++),1==mode&&(encrypt?(left^=cbcleft,right^=cbcright):(cbcleft2=cbcleft,cbcright2=cbcright,cbcleft=left,cbcright=right)),left^=(temp=252645135&(left>>>4^right))<<4,left^=(temp=65535&(left>>>16^(right^=temp)))<<16,left^=temp=858993459&((right^=temp)>>>2^left),left^=temp=16711935&((right^=temp<<2)>>>8^left),left=(left^=(temp=1431655765&(left>>>1^(right^=temp<<8)))<<1)<<1|left>>>31,right=(right^=temp)<<1|right>>>31,j=0;j<iterations;j+=3){for(endloop=looping[j+1],loopinc=looping[j+2],i=looping[j];i!=endloop;i+=loopinc)right1=right^keys[i],right2=(right>>>4|right<<28)^keys[i+1],temp=left,left=right,right=temp^(spfunction2[right1>>>24&63]|spfunction4[right1>>>16&63]|spfunction6[right1>>>8&63]|spfunction8[63&right1]|spfunction1[right2>>>24&63]|spfunction3[right2>>>16&63]|spfunction5[right2>>>8&63]|spfunction7[63&right2]);temp=left,left=right,right=temp}right=right>>>1|right<<31,right^=temp=1431655765&((left=left>>>1|left<<31)>>>1^right),right^=(temp=16711935&(right>>>8^(left^=temp<<1)))<<8,right^=(temp=858993459&(right>>>2^(left^=temp)))<<2,right^=temp=65535&((left^=temp)>>>16^right),right^=temp=252645135&((left^=temp<<16)>>>4^right),left^=temp<<4,1==mode&&(encrypt?(cbcleft=left,cbcright=right):(left^=cbcleft2,right^=cbcright2)),tempresult+=String.fromCharCode(left>>>24,left>>>16&255,left>>>8&255,255&left,right>>>24,right>>>16&255,right>>>8&255,255&right),512==(chunk+=8)&&(result+=tempresult,tempresult="",chunk=0)}if(result=(result+=tempresult).replace(/\0*$/g,""),!encrypt){if(1===padding){var paddingChars=0;(len=result.length)&&(paddingChars=result.charCodeAt(len-1)),paddingChars<=8&&(result=result.substring(0,len-paddingChars))}result=decodeURIComponent(escape(result))}return result}function des_createKeys(key){for(var lefttemp,righttemp,temp,pc2bytes0=new Array(0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964),pc2bytes1=new Array(0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697),pc2bytes2=new Array(0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272),pc2bytes3=new Array(0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144),pc2bytes4=new Array(0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256),pc2bytes5=new Array(0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488),pc2bytes6=new Array(0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746),pc2bytes7=new Array(0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568),pc2bytes8=new Array(0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578),pc2bytes9=new Array(0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488),pc2bytes10=new Array(0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800),pc2bytes11=new Array(0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744),pc2bytes12=new Array(0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128),pc2bytes13=new Array(0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261),iterations=key.length>8?3:1,keys=new Array(32*iterations),shifts=new Array(0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0),m=0,n=0,j=0;j<iterations;j++){var left=key.charCodeAt(m++)<<24|key.charCodeAt(m++)<<16|key.charCodeAt(m++)<<8|key.charCodeAt(m++),right=key.charCodeAt(m++)<<24|key.charCodeAt(m++)<<16|key.charCodeAt(m++)<<8|key.charCodeAt(m++);left^=(temp=252645135&(left>>>4^right))<<4,left^=temp=65535&((right^=temp)>>>-16^left),left^=(temp=858993459&(left>>>2^(right^=temp<<-16)))<<2,left^=temp=65535&((right^=temp)>>>-16^left),left^=(temp=1431655765&(left>>>1^(right^=temp<<-16)))<<1,left^=temp=16711935&((right^=temp)>>>8^left),temp=(left^=(temp=1431655765&(left>>>1^(right^=temp<<8)))<<1)<<8|(right^=temp)>>>20&240,left=right<<24|right<<8&16711680|right>>>8&65280|right>>>24&240,right=temp;for(var i=0;i<shifts.length;i++)shifts[i]?(left=left<<2|left>>>26,right=right<<2|right>>>26):(left=left<<1|left>>>27,right=right<<1|right>>>27),right&=-15,lefttemp=pc2bytes0[(left&=-15)>>>28]|pc2bytes1[left>>>24&15]|pc2bytes2[left>>>20&15]|pc2bytes3[left>>>16&15]|pc2bytes4[left>>>12&15]|pc2bytes5[left>>>8&15]|pc2bytes6[left>>>4&15],temp=65535&((righttemp=pc2bytes7[right>>>28]|pc2bytes8[right>>>24&15]|pc2bytes9[right>>>20&15]|pc2bytes10[right>>>16&15]|pc2bytes11[right>>>12&15]|pc2bytes12[right>>>8&15]|pc2bytes13[right>>>4&15])>>>16^lefttemp),keys[n++]=lefttemp^temp,keys[n++]=righttemp^temp<<16}return keys}function genkey(key,start,end){return{key:pad(key.slice(start,end)),vector:1}}function pad(key){for(var i=key.length;i<24;i++)key+="0";return key}(function(){var READ_ONLY_REGEX,SQLiteFactory,SQLitePlugin,SQLitePluginTransaction,SelfTest,argsArray,dblocations,iosLocationMap,newSQLError,nextTick,txLocks;READ_ONLY_REGEX=/^\s*(?:drop|delete|insert|update|create)\s/i,txLocks={},newSQLError=function(error,code){var sqlError;return sqlError=error,code||(code=0),sqlError||((sqlError=new Error("a plugin had an error but provided no response")).code=code),"string"==typeof sqlError&&((sqlError=new Error(error)).code=code),!sqlError.code&&sqlError.message&&(sqlError.code=code),sqlError.code||sqlError.message||((sqlError=new Error("an unknown error was returned: "+JSON.stringify(sqlError))).code=code),sqlError},nextTick=window.setImmediate||function(fun){window.setTimeout(fun,0)},argsArray=function(fun){return function(){var args,i,len;if(len=arguments.length){for(args=[],i=-1;++i<len;)args[i]=arguments[i];return fun.call(this,args)}return fun.call(this,[])}},(SQLitePlugin=function(openargs,openSuccess,openError){var dbname;if(!openargs||!openargs.name)throw newSQLError("Cannot create a SQLitePlugin db instance without a db name");if("string"!=typeof(dbname=openargs.name))throw newSQLError("sqlite plugin database name must be a string");this.openargs=openargs,this.dbname=dbname,this.openSuccess=openSuccess,this.openError=openError,this.openSuccess||(this.openSuccess=function(){console.log("DB opened: "+dbname)}),this.openError||(this.openError=function(e){console.log(e.message)}),this.open(this.openSuccess,this.openError)}).prototype.databaseFeatures={isSQLitePluginDatabase:!0},SQLitePlugin.prototype.openDBs={},SQLitePlugin.prototype.addTransaction=function(t){txLocks[this.dbname]||(txLocks[this.dbname]={queue:[],inProgress:!1}),txLocks[this.dbname].queue.push(t),this.dbname in this.openDBs&&"INIT"!==this.openDBs[this.dbname]?this.startNextTransaction():this.dbname in this.openDBs?console.log("new transaction is waiting for open operation"):console.log("database is closed, new transaction is [stuck] waiting until db is opened again!")},SQLitePlugin.prototype.transaction=function(fn,error,success){this.openDBs[this.dbname]?this.addTransaction(new SQLitePluginTransaction(this,fn,error,success,!0,!1)):error(newSQLError("database not open"))},SQLitePlugin.prototype.readTransaction=function(fn,error,success){this.openDBs[this.dbname]?this.addTransaction(new SQLitePluginTransaction(this,fn,error,success,!1,!0)):error(newSQLError("database not open"))},SQLitePlugin.prototype.startNextTransaction=function(){var self,_this;self=this,nextTick((_this=this,function(){var txLock;_this.dbname in _this.openDBs&&"OPEN"===_this.openDBs[_this.dbname]?(txLock=txLocks[self.dbname])?txLock.queue.length>0&&!txLock.inProgress&&(txLock.inProgress=!0,txLock.queue.shift().start()):console.log("cannot start next transaction: database connection is lost"):console.log("cannot start next transaction: database not open")}))},SQLitePlugin.prototype.abortAllPendingTransactions=function(){var j,len1,ref,txLock;if((txLock=txLocks[this.dbname])&&txLock.queue.length>0){for(j=0,len1=(ref=txLock.queue).length;j<len1;j++)ref[j].abortFromQ(newSQLError("Invalid database handle"));txLock.queue=[],txLock.inProgress=!1}},SQLitePlugin.prototype.open=function(success,error){var openerrorcb,opensuccesscb,_this;this.dbname in this.openDBs?(console.log("database already open: "+this.dbname),nextTick((_this=this,function(){success(_this)}))):(console.log("OPEN database: "+this.dbname),opensuccesscb=function(_this){return function(){var txLock;_this.openDBs[_this.dbname]||console.log("database was closed during open operation"),_this.dbname in _this.openDBs&&(_this.openDBs[_this.dbname]="OPEN"),success&&success(_this),(txLock=txLocks[_this.dbname])&&txLock.queue.length>0&&!txLock.inProgress&&_this.startNextTransaction()}}(this),openerrorcb=function(_this){return function(){console.log("OPEN database: "+_this.dbname+" failed, aborting any pending transactions"),error&&error(newSQLError("Could not open database")),delete _this.openDBs[_this.dbname],_this.abortAllPendingTransactions()}}(this),this.openDBs[this.dbname]="INIT",cordova.exec(opensuccesscb,openerrorcb,"SQLitePlugin","open",[this.openargs]))},SQLitePlugin.prototype.close=function(success,error){if(this.dbname in this.openDBs){if(txLocks[this.dbname]&&txLocks[this.dbname].inProgress)return console.log("cannot close: transaction is in progress"),void error(newSQLError("database cannot be closed while a transaction is in progress"));console.log("CLOSE database: "+this.dbname),delete this.openDBs[this.dbname],txLocks[this.dbname]?console.log("closing db with transaction queue length: "+txLocks[this.dbname].queue.length):console.log("closing db with no transaction lock state"),cordova.exec(success,error,"SQLitePlugin","close",[{path:this.dbname}])}else console.log("cannot close: database is not open"),error&&nextTick(function(){return error()})},SQLitePlugin.prototype.executeSql=function(statement,params,success,error){var myerror,myfn,mysuccess;mysuccess=function(t,r){if(success)return success(r)},myerror=function(t,e){if(error)return error(e)},myfn=function(tx){tx.addStatement(statement,params,mysuccess,myerror)},this.addTransaction(new SQLitePluginTransaction(this,myfn,null,null,!1,!1))},SQLitePlugin.prototype.sqlBatch=function(sqlStatements,success,error){var batchList,j,len1,myfn,st;if(!sqlStatements||sqlStatements.constructor!==Array)throw newSQLError("sqlBatch expects an array");for(batchList=[],j=0,len1=sqlStatements.length;j<len1;j++)if((st=sqlStatements[j]).constructor===Array){if(0===st.length)throw newSQLError("sqlBatch array element of zero (0) length");batchList.push({sql:st[0],params:0===st.length?[]:st[1]})}else batchList.push({sql:st,params:[]});myfn=function(tx){var elem,k,len2,results;for(results=[],k=0,len2=batchList.length;k<len2;k++)elem=batchList[k],results.push(tx.addStatement(elem.sql,elem.params,null,null));return results},this.addTransaction(new SQLitePluginTransaction(this,myfn,error,success,!0,!1))},(SQLitePluginTransaction=function(db,fn,error,success,txlock,readOnly){if("function"!=typeof fn)throw newSQLError("transaction expected a function");this.db=db,this.fn=fn,this.error=error,this.success=success,this.txlock=txlock,this.readOnly=readOnly,this.executes=[],txlock?this.addStatement("BEGIN",[],null,function(tx,err){throw newSQLError("unable to begin transaction: "+err.message,err.code)}):this.addStatement("SELECT 1",[],null,null)}).prototype.start=function(){var err;try{this.fn(this),this.run()}catch(error1){err=error1,txLocks[this.db.dbname].inProgress=!1,this.db.startNextTransaction(),this.error&&this.error(newSQLError(err))}},SQLitePluginTransaction.prototype.executeSql=function(sql,values,success,error){if(this.finalized)throw{message:"InvalidStateError: DOM Exception 11: This transaction is already finalized. Transactions are committed after its success or failure handlers are called. If you are using a Promise to handle callbacks, be aware that implementations following the A+ standard adhere to run-to-completion semantics and so Promise resolution occurs on a subsequent tick and therefore after the transaction commits.",code:11};this.readOnly&&READ_ONLY_REGEX.test(sql)?this.handleStatementFailure(error,{message:"invalid sql for a read-only transaction"}):this.addStatement(sql,values,success,error)},SQLitePluginTransaction.prototype.addStatement=function(sql,values,success,error){var j,len1,params,t,v;if(params=[],values&&values.constructor===Array)for(j=0,len1=values.length;j<len1;j++)t=typeof(v=values[j]),params.push(null===v||void 0===v||"number"===t||"string"===t?v:v instanceof Blob?v.valueOf():v.toString());this.executes.push({success:success,error:error,sql:sql,params:params})},SQLitePluginTransaction.prototype.handleStatementSuccess=function(handler,response){var rows;handler&&handler(this,{rows:{item:function(i){return rows[i]},length:(rows=response.rows||[]).length},rowsAffected:response.rowsAffected||0,insertId:response.insertId||void 0})},SQLitePluginTransaction.prototype.handleStatementFailure=function(handler,response){if(!handler)throw newSQLError("a statement with no error handler failed: "+response.message,response.code);if(!1!==handler(this,response))throw newSQLError("a statement error callback did not return false: "+response.message,response.code)},SQLitePluginTransaction.prototype.run=function(){var batchExecutes,handlerFor,i,mycb,mycbmap,request,tropts,tx,txFailure,waiting;for(txFailure=null,tropts=[],batchExecutes=this.executes,waiting=batchExecutes.length,this.executes=[],tx=this,handlerFor=function(index,didSucceed){return function(response){try{didSucceed?tx.handleStatementSuccess(batchExecutes[index].success,response):tx.handleStatementFailure(batchExecutes[index].error,newSQLError(response))}catch(error1){txFailure||(txFailure=newSQLError(error1))}0==--waiting&&(txFailure?tx.abort(txFailure):tx.executes.length>0?tx.run():tx.finish())}},i=0,mycbmap={};i<batchExecutes.length;)request=batchExecutes[i],mycbmap[i]={success:handlerFor(i,!0),error:handlerFor(i,!1)},tropts.push({qid:1111,sql:request.sql,params:request.params}),i++;mycb=function(result){var j,last,q,r,ref,res,type;for(last=result.length-1,i=j=0,ref=last;0<=ref?j<=ref:j>=ref;i=0<=ref?++j:--j)type=(r=result[i]).type,res=r.result,(q=mycbmap[i])&&q[type]&&q[type](res)},cordova.exec(mycb,null,"SQLitePlugin","backgroundExecuteSqlBatch",[{dbargs:{dbname:this.db.dbname},executes:tropts}])},SQLitePluginTransaction.prototype.abort=function(txFailure){var failed,succeeded;this.finalized||(this,succeeded=function(tx){txLocks[tx.db.dbname].inProgress=!1,tx.db.startNextTransaction(),tx.error&&tx.error(txFailure)},failed=function(tx,err){txLocks[tx.db.dbname].inProgress=!1,tx.db.startNextTransaction(),tx.error&&tx.error(newSQLError("error while trying to roll back: "+err.message,err.code))},this.finalized=!0,this.txlock?(this.addStatement("ROLLBACK",[],succeeded,failed),this.run()):succeeded(this))},SQLitePluginTransaction.prototype.finish=function(){var failed,succeeded;this.finalized||(this,succeeded=function(tx){txLocks[tx.db.dbname].inProgress=!1,tx.db.startNextTransaction(),tx.success&&tx.success()},failed=function(tx,err){txLocks[tx.db.dbname].inProgress=!1,tx.db.startNextTransaction(),tx.error&&tx.error(newSQLError("error while trying to commit: "+err.message,err.code))},this.finalized=!0,this.txlock?(this.addStatement("COMMIT",[],succeeded,failed),this.run()):succeeded(this))},SQLitePluginTransaction.prototype.abortFromQ=function(sqlerror){this.error&&this.error(sqlerror)},dblocations=["docs","libs","nosync"],iosLocationMap={default:"nosync",Documents:"docs",Library:"libs"},SQLiteFactory={openDatabase:argsArray(function(args){var dblocation,errorcb,okcb,openargs;if(args.length<1||!args[0])throw newSQLError("Sorry missing mandatory open arguments object in openDatabase call");if(args[0].constructor===String)throw newSQLError("Sorry first openDatabase argument must be an object");if(!(openargs=args[0]).name)throw newSQLError("Database name value is missing in openDatabase call");if(!openargs.iosDatabaseLocation&&!openargs.location&&0!==openargs.location)throw newSQLError("Database location or iosDatabaseLocation value is now mandatory in openDatabase call");return dblocation=openargs.location&&"default"===openargs.location?iosLocationMap.default:openargs.iosDatabaseLocation?iosLocationMap[openargs.iosDatabaseLocation]:dblocations[openargs.location],openargs.dblocation=dblocation,openargs.createFromLocation&&1===openargs.createFromLocation&&(openargs.createFromResource="1"),openargs.androidDatabaseImplementation&&2===openargs.androidDatabaseImplementation&&(openargs.androidOldDatabaseImplementation=1),openargs.androidLockWorkaround&&1===openargs.androidLockWorkaround&&(openargs.androidBugWorkaround=1),okcb=null,errorcb=null,args.length>=2&&(okcb=args[1],args.length>2&&(errorcb=args[2])),new SQLitePlugin(openargs,okcb,errorcb)}),deleteDatabase:function(first,success,error){var args,dblocation;if(args={},first.constructor===String)throw newSQLError("Sorry first deleteDatabase argument must be an object");if(!first||!first.name)throw new Error("Please specify db name");if(args.path=first.name,!first.iosDatabaseLocation&&!first.location&&0!==first.location)throw newSQLError("Database location or iosDatabaseLocation value is now mandatory in deleteDatabase call");return dblocation=first.location&&"default"===first.location?iosLocationMap.default:first.iosDatabaseLocation?iosLocationMap[first.iosDatabaseLocation]:dblocations[first.location],args.dblocation=dblocation,delete SQLitePlugin.prototype.openDBs[args.path],cordova.exec(success,error,"SQLitePlugin","delete",[args])}},SelfTest={DBNAME:"___$$$___litehelpers___$$$___test___$$$___.db",start:function(successcb,errorcb){return SQLiteFactory.deleteDatabase({name:SelfTest.DBNAME,location:"default"},function(){return SelfTest.start2(successcb,errorcb)},function(){return SelfTest.start2(successcb,errorcb)})},start2:function(successcb,errorcb){return SQLiteFactory.openDatabase({name:SelfTest.DBNAME,location:"default"},function(db){return db.sqlBatch(["CREATE TABLE TestTable(TestColumn);",["INSERT INTO TestTable (TestColumn) VALUES (?);",["test-value"]]],function(){return db.executeSql("SELECT * FROM TestTable",[],function(resutSet){if(resutSet.rows)if(resutSet.rows.length)if(1===resutSet.rows.length)if(resutSet.rows.item(0).TestColumn){if("test-value"===resutSet.rows.item(0).TestColumn)return db.transaction(function(tx){return tx.executeSql("UPDATE TestTable SET TestColumn = ?",["new-value"])},function(tx_err){return SelfTest.finishWithError(errorcb,"UPDATE transaction error: "+tx_err)},function(){return db.readTransaction(function(tx2){return tx2.executeSql("SELECT * FROM TestTable",[],function(ignored,resutSet2){if(!resutSet2.rows)throw newSQLError("Missing resutSet.rows");if(!resutSet2.rows.length)throw newSQLError("Missing resutSet.rows.length");if(1!==resutSet2.rows.length)throw newSQLError("Incorrect resutSet.rows.length value: "+resutSet.rows.length+" (expected: 1)");if(!resutSet2.rows.item(0).TestColumn)throw newSQLError("Missing resutSet.rows.item(0).TestColumn");if("new-value"!==resutSet2.rows.item(0).TestColumn)throw newSQLError("Incorrect resutSet.rows.item(0).TestColumn value: "+resutSet.rows.item(0).TestColumn+" (expected: 'test-value')")})},function(tx2_err){return SelfTest.finishWithError(errorcb,"readTransaction error: "+tx2_err)},function(){return db.close(function(){return SQLiteFactory.deleteDatabase({name:SelfTest.DBNAME,location:"default"},successcb,function(cleanup_err){return SelfTest.finishWithError(errorcb,"Cleanup error: "+cleanup_err)})},function(close_err){return SelfTest.finishWithError(errorcb,"close error: "+close_err)})})});SelfTest.finishWithError(errorcb,"Incorrect resutSet.rows.item(0).TestColumn value: "+resutSet.rows.item(0).TestColumn+" (expected: 'test-value')")}else SelfTest.finishWithError(errorcb,"Missing resutSet.rows.item(0).TestColumn");else SelfTest.finishWithError(errorcb,"Incorrect resutSet.rows.length value: "+resutSet.rows.length+" (expected: 1)");else SelfTest.finishWithError(errorcb,"Missing resutSet.rows.length");else SelfTest.finishWithError(errorcb,"Missing resutSet.rows")},function(select_err){return SelfTest.finishWithError(errorcb,"SELECT error: "+select_err)})},function(batch_err){return SelfTest.finishWithError(errorcb,"sql batch error: "+batch_err)})},function(open_err){return SelfTest.finishWithError(errorcb,"Open database error: "+open_err)})},finishWithError:function(errorcb,message){return SQLiteFactory.deleteDatabase({name:SelfTest.DBNAME,location:"default"},function(){return errorcb(newSQLError(message))},function(err2){return errorcb(newSQLError("Cleanup error: "+err2+" for error: "+message))})}},this.sqlitePlugin={sqliteFeatures:{isSQLitePlugin:!0},echoTest:function(okcb,errorcb){return function(s){return"test-string"===s?okcb():errorcb("Mismatch: got: '"+s+"' expected 'test-string'")},function(e){return errorcb(e)},cordova.exec(okcb,errorcb,"SQLitePlugin","echoStringValue",[{value:"test-string"}])},selfTest:SelfTest.start,openDatabase:SQLiteFactory.openDatabase,deleteDatabase:SQLiteFactory.deleteDatabase}}).call(this),angular.module("starter.unit",[]).factory("tip",function($ionicLoading,$timeout,$cordovaToast){return function(text,callback){$cordovaToast.show(text,"short","center").then(function(success){callback&&callback()})}}).factory("req",function($ionicHistory,$ionicPlatform,$cordovaAppVersion,$cordovaDevice,$cordovaSQLite,$q,$state,$stateParams,$rootScope){ionic.Platform.device(),ionic.Platform.isWebView(),ionic.Platform.isIPad();var isIOS=ionic.Platform.isIOS(),isAndroid=ionic.Platform.isAndroid(),currentPlatformVersion=(ionic.Platform.isWindowsPhone(),ionic.Platform.platform(),ionic.Platform.version());return{MethodCode:function(MethodCode){return MethodCode+""},time:function(){return(new Date).getFullYear()+""+((new Date).getMonth()+1)+(new Date).getDate()+((new Date).getHours()<10?"0"+(new Date).getHours():(new Date).getHours())+((new Date).getMinutes()<10?"0"+(new Date).getMinutes():(new Date).getMinutes())+((new Date).getSeconds()<10?"0"+(new Date).getSeconds():(new Date).getSeconds())},id:function(){return(isIOS?"IPHONE":isAndroid?"ANDROID":"")+(new Date).getFullYear()+(new Date).getMonth()+(new Date).getDate()+function(){for(var result="",data=["0","1","2","3","4","5","6","7","8","9"],i=0;i<8;i++)r=Math.floor(10*Math.random()),result+=data[r];return result}()},MVER:function(){return currentPlatformVersion+""},MTYPE:function(){return isIOS?"3":isAndroid?"1":""},addDay:function(dataStr,dayCount){var isdate=new Date(dataStr.replace(/-/g,"/")),mon=(isdate=new Date(1e3*(isdate/1e3+86400*dayCount))).getMonth()+1;return mon<10&&(mon="0"+mon),isdate.getFullYear()+"-"+mon+"-"+isdate.getDate()},day:function(date1,date2){var oDate1=new Date(date1),oDate2=new Date(date2);return oDate1.getTime()<=oDate2.getTime()},countTimeLength:function(interval,date1,date2){interval=interval.toUpperCase();var dt1=Date.parse(date1.replace(/-/g,"/")),dt2=Date.parse(date2.replace(/-/g,"/"));try{return((dt2-dt1)/{D:864e5,H:36e5,M:6e4,S:1e3,T:1}[interval]).toFixed(2)}catch(e){return e.message}},signInfo:function(bodyInfo,signKey){var keyArr=[];for(var key in"1"!=$rootScope.logined||""!=signKey&&null!=signKey&&void 0!=signKey||$state.go("login"),bodyInfo)keyArr.push(key);keyArr.sort();for(var valStr="",i=0;i<keyArr.length;i++)""!==bodyInfo[keyArr[i]]&&(valStr+=bodyInfo[keyArr[i]]);return MD5.hex(MD5.hex(valStr).toUpperCase()+signKey).toUpperCase()},deviceInfo:function(){var deferred=$q.defer(),deferredInfo={signKey:"",sessionId:"",APPID:"",APPVER:"",imei:"",PMODEL:"",PBRAND:"",chid:$rootScope.chid,msgFlg:!1};return $ionicPlatform.ready(function(){var db="";db=window.cordova?$cordovaSQLite.openDB({name:"hpApp.db",iosDatabaseLocation:"default"}):window.openDatabase("hpApp.db","1","my",104857600),$cordovaAppVersion.getVersionCode().then(function(build){deferredInfo.APPID=build+"",$cordovaAppVersion.getVersionNumber().then(function(version){deferredInfo.APPVER="V"+version,deferredInfo.imei=$cordovaDevice.getUUID()+"",deferredInfo.PMODEL=$cordovaDevice.getModel().split(" ")[1]+"",deferredInfo.PBRAND=$cordovaDevice.getModel().split(" ")[0]+"",$cordovaSQLite.execute(db,"SELECT sessionId FROM loginInfo").then(function(res){deferredInfo.sessionId=res.rows.length>0?res.rows.item(0).sessionId:"",$cordovaSQLite.execute(db,"SELECT signKey FROM loginInfo").then(function(res){deferredInfo.signKey=res.rows.length>0?res.rows.item(0).signKey:"",deferred.resolve(deferredInfo)},function(err){deferred.resolve(deferredInfo)})},function(err){deferred.resolve(deferredInfo)})})})}),deferred.promise}}}).factory("_responseData",function(tip,state){return function(data,callback){"0"==data.returnCode||"1"==data.returnCode?callback&&callback():"999"==data.returnCode?tip("您的账号在其他设备登录",function(){state.go("login")}):tip(data.returnMsg)}}).factory("state",function($ionicHistory,$state,$stateParams,$q,$timeout,$rootScope,sqLiteLoginInfo){return{go:function(){var stateName=arguments[0],stateParams={},disableBack=!1;(arguments.length=2)&&("object"==typeof arguments[1]?stateParams=arguments[1]:"boolean"==typeof arguments[1]&&(disableBack=arguments[1])),(arguments.length="object"==typeof arguments[1]&&"boolean"==typeof arguments[2])&&(stateParams=arguments[1],disableBack=arguments[2]);$ionicHistory&&$ionicHistory.currentHistoryId(),$ionicHistory&&$ionicHistory.currentView()&&$ionicHistory.currentView().viewId;$ionicHistory.nextViewOptions({disableBack:disableBack});var loginname=["tab.investHly","tab.invest","tab.,","tab.assetStatistics","tab.capitalFlow","investTickets","tab.accountM","tab.assetStatistics","tab.updateLoginPwd","tab.updateTradePwd","tab.resetTradePwd","tab.resetTradePwdContent","tab.updatePhn","tab.updatePhnStep2","withdraw ","withdrawFee","withdrawIptPwd","quickPayment","wechatPayment","tab.myInvest","tab.myInvestNew","tab.investDetail","login","record","recordInfo","tab.investZzb","tab.myTasks"].join();$q.defer();console.log("当前页面的状态名称："+stateName),"undefined"==localStorage.token||""==localStorage.token||null==localStorage.token?loginname.indexOf(stateName)>=0?$state.go("login"):$state.go(stateName,stateParams):"undefined"==localStorage.token&&""==localStorage.token&&null==localStorage.token||$state.go(stateName,stateParams)},back:function(){var backHistoryId=$ionicHistory.currentHistoryId(),backView=($ionicHistory.currentView().viewId,$ionicHistory.viewHistory().histories[backHistoryId].stack.filter(function(v){return v.stateId===$stateParams.backViewId})[0]);$ionicHistory.backView(backView),$ionicHistory.goBack()}}}).factory("scrollList",function(){var scrollList=[];return{getAll:function(){return scrollList},add:function(append){return scrollList=scrollList.concat(append)},init:function(){return scrollList=[],this}}}).factory("commonFunction",function(){return{base64encode:function(str){var out,i,len,c1,c2,c3,base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(len=str.length,i=0,out="";i<len;){if(c1=255&str.charCodeAt(i++),i==len){out+=base64EncodeChars.charAt(c1>>2),out+=base64EncodeChars.charAt((3&c1)<<4),out+="==";break}if(c2=str.charCodeAt(i++),i==len){out+=base64EncodeChars.charAt(c1>>2),out+=base64EncodeChars.charAt((3&c1)<<4|(240&c2)>>4),out+=base64EncodeChars.charAt((15&c2)<<2),out+="=";break}c3=str.charCodeAt(i++),out+=base64EncodeChars.charAt(c1>>2),out+=base64EncodeChars.charAt((3&c1)<<4|(240&c2)>>4),out+=base64EncodeChars.charAt((15&c2)<<2|(192&c3)>>6),out+=base64EncodeChars.charAt(63&c3)}return out},utf16to8:function(str){var out,i,len,c;for(out="",len=str.length,i=0;i<len;i++)(c=str.charCodeAt(i))>=1&&c<=127?out+=str.charAt(i):c>2047?(out+=String.fromCharCode(224|c>>12&15),out+=String.fromCharCode(128|c>>6&63),out+=String.fromCharCode(128|c>>0&63)):(out+=String.fromCharCode(192|c>>6&31),out+=String.fromCharCode(128|c>>0&63));return out},getRealLength:function(str){for(var realLength=0,len=str.length,charCode=-1,i=0;i<len;i++)realLength+=(charCode=str.charCodeAt(i))>=0&&charCode<=128?1:2;return realLength},subRealString:function(str,limiteLen){for(var realLength=0,len=str.length,s="",charCode=-1,i=0;i<len;i++)if(realLength+=(charCode=str.charCodeAt(i))>=0&&charCode<=128?1:2,s+=str.charAt(i),realLength>=limiteLen)return s+"...";return s}}}).factory("jpushService",function(){var push;return{setBadge:function(badge){push&&(console.log("jpush: set badge",badge),plugins.jPushPlugin.reSetBadge(),plugins.jPushPlugin.setBadge(badge))},setAlias:function(alias){push&&plugins.jPushPlugin.setAlias(alias)},check:function(){window.jpush&&push&&(plugins.jPushPlugin.receiveNotificationIniOSCallback(window.jpush),window.jpush=null)},init:function(notificationCallback){(push=window.plugins&&window.plugins.jPushPlugin)&&(console.log("jpush: init"),plugins.jPushPlugin.init(),plugins.jPushPlugin.setDebugMode(!0),document.addEventListener("jpush.openNotification",notificationCallback,!1))}}}).factory("baseInfo",function($http,$rootScope,reqRoot,req,tip){return function(callback){req.deviceInfo().then(function(deviceInfo){$rootScope.loadingShow(),$http.post(reqRoot,{id:req.id(),MethodCode:req.MethodCode("LM007"),time:req.time(),signInfo:req.signInfo({sessionId:deviceInfo.sessionId},deviceInfo.signKey),imei:deviceInfo.imei,APPID:deviceInfo.APPID,APPVER:deviceInfo.APPVER,MVER:req.MVER(),MTYPE:req.MTYPE(),PMODEL:deviceInfo.PMODEL,PBRAND:deviceInfo.PBRAND,chid:deviceInfo.chid,body:{sessionId:deviceInfo.sessionId}}).success(function(data){$rootScope.loadingHide(),"1"==data.returnCode?callback(data.body[0]):tip(data.returnMsg)}).error(function(error){tip("网络忙，请稍后再试……")})})}}).factory("backMore",function(){return{"tab.investSuccess":-3,"tab.resetTradePwdContent":-2}}).filter("formatMoney",function(){return function(num,step){return 1*Math.ceil(100*num)/100}}).filter("formatMoneyFloor",function(){return function(num){return 1*Math.floor(1e4*num/100)/100}}).filter("formatMoneyRound",function(){return function(num){return 1*Math.round(1e4*num/100)/100}}).filter("memberCenterMoneyFormat",function(){function formatMoney(s,n){n=n>=0&&n<=20?n:2;var l=(s=parseFloat((s+"").replace(/[^\d\.-]/g,"")).toFixed(n)+"").split(".")[0].split("").reverse(),r=s.split(".")[1];for(t="",i=0;i<l.length;i++)t+=l[i]+((i+1)%3==0&&i+1!=l.length?",":"");return t.split("").reverse().join("")+"."+r}return function(value){return""==value&&(value=0),value>=1e5?formatMoney(value=parseFloat(value/1e4),2)+"万":formatMoney(value,2)}}).filter("formatMoblie",function(){return function(phone){return phone&&"[object String]"===Object.prototype.toString.call(phone)&&""!=phone?phone.substring(0,3)+"****"+phone.substring(phone.length-4,phone.length):""}}).filter("frormatRelNm",function(){return function(name){return name&&"[object String]"===Object.prototype.toString.call(name)&&""!=name?2==name.length?name.substring(0,1)+"*":name.substring(0,1)+"**":""}}).filter("formatIdNo",function(){return function(idNo){return idNo&&"[object String]"===Object.prototype.toString.call(idNo)&&""!=idNo?idNo.substring(0,4)+"********"+idNo.substring(idNo.length-4,idNo.length):""}}).filter("formatCardNo",function(){return function(cardNo){return cardNo&&"[object String]"===Object.prototype.toString.call(cardNo)&&""!=cardNo?cardNo.substring(0,4)+" **** **** "+cardNo.substring(cardNo.length-4,cardNo.length):""}}).filter("passwordFormat",function(){return function(num){return num&&"[object String]"===Object.prototype.toString.call(num)&&""!=num?num.replace(/./g,"·"):""}}),function(w){var hexcase=0,b64pad="",chrsz=8;function hex_md5(s){return binl2hex(core_md5(str2binl(s),s.length*chrsz))}var _MD5={hex:hex_md5,b64:function(s){return binl2b64(core_md5(str2binl(s),s.length*chrsz))},str:function(s){return binl2str(core_md5(str2binl(s),s.length*chrsz))},hex_hmac:function(key,data){return binl2hex(core_hmac_md5(key,data))},b64_hmac:function(key,data){return binl2b64(core_hmac_md5(key,data))},str_hmac:function(key,data){return binl2str(core_hmac_md5(key,data))}};function core_md5(x,len){x[len>>5]|=128<<len%32,x[14+(len+64>>>9<<4)]=len;for(var a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16){var olda=a,oldb=b,oldc=c,oldd=d;b=md5_ii(b=md5_ii(b=md5_ii(b=md5_ii(b=md5_hh(b=md5_hh(b=md5_hh(b=md5_hh(b=md5_gg(b=md5_gg(b=md5_gg(b=md5_gg(b=md5_ff(b=md5_ff(b=md5_ff(b=md5_ff(b,c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+0],7,-680876936),b,c,x[i+1],12,-389564586),a,b,x[i+2],17,606105819),d,a,x[i+3],22,-1044525330),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+4],7,-176418897),b,c,x[i+5],12,1200080426),a,b,x[i+6],17,-1473231341),d,a,x[i+7],22,-45705983),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+8],7,1770035416),b,c,x[i+9],12,-1958414417),a,b,x[i+10],17,-42063),d,a,x[i+11],22,-1990404162),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+12],7,1804603682),b,c,x[i+13],12,-40341101),a,b,x[i+14],17,-1502002290),d,a,x[i+15],22,1236535329),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+1],5,-165796510),b,c,x[i+6],9,-1069501632),a,b,x[i+11],14,643717713),d,a,x[i+0],20,-373897302),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+5],5,-701558691),b,c,x[i+10],9,38016083),a,b,x[i+15],14,-660478335),d,a,x[i+4],20,-405537848),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+9],5,568446438),b,c,x[i+14],9,-1019803690),a,b,x[i+3],14,-187363961),d,a,x[i+8],20,1163531501),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),b,c,x[i+2],9,-51403784),a,b,x[i+7],14,1735328473),d,a,x[i+12],20,-1926607734),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+5],4,-378558),b,c,x[i+8],11,-2022574463),a,b,x[i+11],16,1839030562),d,a,x[i+14],23,-35309556),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),b,c,x[i+4],11,1272893353),a,b,x[i+7],16,-155497632),d,a,x[i+10],23,-1094730640),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+13],4,681279174),b,c,x[i+0],11,-358537222),a,b,x[i+3],16,-722521979),d,a,x[i+6],23,76029189),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+9],4,-640364487),b,c,x[i+12],11,-421815835),a,b,x[i+15],16,530742520),d,a,x[i+2],23,-995338651),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+0],6,-198630844),b,c,x[i+7],10,1126891415),a,b,x[i+14],15,-1416354905),d,a,x[i+5],21,-57434055),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+12],6,1700485571),b,c,x[i+3],10,-1894986606),a,b,x[i+10],15,-1051523),d,a,x[i+1],21,-2054922799),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+8],6,1873313359),b,c,x[i+15],10,-30611744),a,b,x[i+6],15,-1560198380),d,a,x[i+13],21,1309151649),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+4],6,-145523070),b,c,x[i+11],10,-1120210379),a,b,x[i+2],15,718787259),d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add((num=safe_add(safe_add(a,q),safe_add(x,t)))<<(cnt=s)|num>>>32-cnt,b);var num,cnt}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function core_hmac_md5(key,data){var bkey=str2binl(key);bkey.length>16&&(bkey=core_md5(bkey,key.length*chrsz));for(var ipad=Array(16),opad=Array(16),i=0;i<16;i++)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i];var hash=core_md5(ipad.concat(str2binl(data)),512+data.length*chrsz);return core_md5(opad.concat(hash),640)}function safe_add(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function str2binl(str){for(var bin=Array(),mask=(1<<chrsz)-1,i=0;i<str.length*chrsz;i+=chrsz)bin[i>>5]|=(str.charCodeAt(i/chrsz)&mask)<<i%32;return bin}function binl2str(bin){for(var str="",mask=(1<<chrsz)-1,i=0;i<32*bin.length;i+=chrsz)str+=String.fromCharCode(bin[i>>5]>>>i%32&mask);return str}function binl2hex(binarray){for(var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef",str="",i=0;i<4*binarray.length;i++)str+=hex_tab.charAt(binarray[i>>2]>>i%4*8+4&15)+hex_tab.charAt(binarray[i>>2]>>i%4*8&15);return str}function binl2b64(binarray){for(var str="",i=0;i<4*binarray.length;i+=3)for(var triplet=(binarray[i>>2]>>i%4*8&255)<<16|(binarray[i+1>>2]>>(i+1)%4*8&255)<<8|binarray[i+2>>2]>>(i+2)%4*8&255,j=0;j<4;j++)8*i+6*j>32*binarray.length?str+=b64pad:str+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(triplet>>6*(3-j)&63);return str}window.MD5=_MD5}(window);var des3iv="01234567",DES3={encrypt:function(key,input){var genKey=genkey(key,0,24);return btoa(des(genKey.key,input,1,1,des3iv,1))},decrypt:function(key,input){return des(genkey(key,0,24).key,atob(input),0,1,des3iv,1)}};angular.module("starter.controllers",["ngCordova","starter.services","starter.config"]).controller("HomeCtrl",function($scope,$http,$rootScope,tip,$stateParams,scrollList,msgSize,$timeout,$ionicScrollDelegate,state,$ionicPopup,imgUrl,bdList,bdDz,$ionicLoading,$ionicSlideBoxDelegate,bdDetailJl,$cordovaStatusbar,plbd){var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},tel:localStorage.telephone,gcnikename:localStorage.gcnikename,gcphoto:localStorage.gcphoto,loginFlg:!1,bigImage:!1,url:"",slidImg:"",hidetabs:!1,dZFlg:!1,bdplcontent:"",bdid:"",logoFlg:!1,msgFlg:!1,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},toLogin:function(){state.go("login")},tomemberCenter:function(){state.go("memberCenter")},msgSize:function(){var data={accountID:localStorage.gcid};$http({method:"POST",url:msgSize,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?data.datas>0?vm.msgFlg=!0:vm.msgFlg=!1:$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},showBigImage:function(imgTemp){vm.bigImage=!0,vm.url=imgUrl+imgTemp+""},myScrollL:function(){new Swiper(".swiper-container",{loop:!0,pagination:{el:".swiper-pagination"},scrollbar:{el:".swiper-scrollbar"}})},hideBigImage:function(){vm.bigImage=!1},dateFormats:function(data){var date=new Date(data),year=date.getFullYear(),month=date.getMonth()+1,strDate=date.getDate();date.getHours(),date.getMinutes(),date.getSeconds();return month>=1&&month<=9&&(month="0"+month),strDate>=0&&strDate<=9&&(strDate="0"+strDate),year+"-"+month+"-"+strDate},dianzan:function(id,index){$http.get(bdDz+"?bdid="+id).success(function(data){if("1000"==data.code){for(var aElements=document.getElementsByClassName("dzimg"),aElementsize=document.getElementsByClassName("dzsize"),aElement1s=document.getElementsByClassName("gifshow"),i=0;i<aElements.length;i++)if(aElements[i].getAttribute("imgindex")==index){aElements[i].src="img/bd/List_praise_on.png";var size=aElementsize[i].innerHTML;aElementsize[i].innerHTML=parseInt(size)+parseInt("1")}for(i=0;i<aElement1s.length;i++)if(aElement1s[i].getAttribute("gifShow")==index)return aElement1s[i].style.display="block",vm.index=i,void vm.hide(i)}}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},hide:function(i){setTimeout(function(){document.getElementsByClassName("gifshow")[i].style.display="none"},1e3)},bdDetail:function(data){state.go("bdDetail",{bdData:JSON.stringify(data)})},getData:function(isInit){$ionicLoading.show(),$http.get(bdList+"?pageIndex="+vm.pagination.currentPage+"&pageSize=10").success(function(data){if($ionicLoading.hide(),"0"!=data.datas.length)if(isInit){for(var i=0;i<data.datas.length;i++){var title=data.datas[i].bdcontent.split("?")[1],cont=data.datas[i].bdcontent.split("?")[0];if(data.datas[i].title=title,data.datas[i].cont=cont,void 0!=data.datas[i].ylzd){var imgTemp=data.datas[i].ylzd.split(";");data.datas[i].imgTemp=imgTemp}}vm.messages=scrollList.init().add(data.datas),$ionicSlideBoxDelegate.update()}else vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize();else vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1),""!=vm.tel&&void 0!=vm.tel&&vm.msgSize()}).controller("FindCtrl",function($scope,$ionicLoading,$ionicHistory,scrollList,$http,$ionicPlatform,$ionicSlideBoxDelegate,$timeout,$ionicPopup,$rootScope,req,state,reqRoot,tip,sqLiteLoginInfo,baseInfo,queryRc){var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},tel:localStorage.telephone,gcnikename:localStorage.gcnikename,gcphoto:localStorage.gcphoto,loginFlg:!1,bigImage:!1,url:"",slidImg:"",hidetabs:!1,dZFlg:!1,bdplcontent:"",bdid:"",logoFlg:!1,msgFlg:!1,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},rcDetail:function(data){state.go("rcDetail",{rcData:JSON.stringify(data)})},nowDate:function(){return new Date},bdDetail:function(data){state.go("bdDetail",{bdData:JSON.stringify(data)})},getData:function(isInit){$ionicLoading.show();var data={pageindex:vm.pagination.currentPage,pagesize:"10"};$http({method:"POST",url:queryRc,dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?(vm.messages=scrollList.init().add(data.datas),$ionicSlideBoxDelegate.update()):(vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("mbqSellCtrl",function($rootScope,$scope,$http,sgMbq,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,getPrice,$cordovaDevice,mbqSale){$scope.showFlg=0,$scope.menuOn=function(index){$scope.showFlg=index},$scope.allnum=0,$scope.amount=0,$scope.data={sqbNum:"",sqbPrice:"",cqbNum:"",cqbPrice:""},$scope.calc=function(){0==$scope.showFlg?$scope.allnum=Number($scope.data.cqbNum*$scope.data.cqbPrice).toFixed(2):$scope.allnum=Number($scope.data.sqbNum*$scope.data.sqbPrice).toFixed(2)},$scope.getQb=function(){var data={phone:localStorage.telephone};$http({method:"POST",url:getPrice,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$scope.amount=data.datas:$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},$scope.POrders=function(){if(0==$scope.showFlg){if(""==$scope.data.cqbNum)return $rootScope.tip("请输入出售数量"),!1;if(""==$scope.data.cqbPrice)return $rootScope.tip("请输入出售金额"),!1;if($scope.amount<$scope.data.cqbNum)return $rootScope.tip("出售数量不能小于总资产"),!1;var data={qbscfbrid:localStorage.gcid,qbscrmb:$scope.data.cqbPrice,qbscshuliang:$scope.data.cqbNum};$http({method:"POST",url:mbqSale,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?($rootScope.tip("发布成功"),$scope.data.cqbNum="",$scope.data.cqbPrice=""):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}else{if(""==$scope.data.sqbNum)return $rootScope.tip("请输收购数量"),!1;if(""==$scope.data.sqbPrice)return $rootScope.tip("请输入收购金额"),!1;data={qbscfbrid:localStorage.gcid,qbscrmb:$scope.data.sqbPrice,qbscshuliang:$scope.data.sqbNum};$http({method:"POST",url:sgMbq,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?($rootScope.tip("发布成功"),$scope.data.sqbNum="",$scope.data.sqbPrice=""):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}},$scope.getQb()}).controller("MemberCenterCtrl",function($rootScope,meSc,getPrice,$scope,$q,$timeout,$stateParams,$ionicHistory,$http,$ionicPopup,state,memberCenter,reqRoot,req,capitalQuery,tip,_responseData,withdrawFeeFactory,sqLiteLoginInfo,zcInfo,httpService,upPhoto,exitLogin,msgSize,$ionicLoading){$rootScope.imgMsgFlg=!1,$scope.data={level:1,photo:"img/photo.png",userName:"",totAmt:"0.00",availBal:"0.00",accumulateRevenue:"0.00",srpIntAmt:"0.00",availInvestCouponCnt:"0",payCnt:"0",bidCnt:"0",closeCnt:"0",transferCnt:"0",latestMstRtnDt:"",latestMstRtnLnAmt:"*",dailyRevenue:"0.00",file:"",photo:localStorage.gcphoto,size:"",bageFlg:!1,amount:0},$scope.phone=localStorage.telephone,$scope.exitLogin=function(){var data={accountID:localStorage.token,phoneNO:localStorage.telephone};$http({method:"POST",url:exitLogin,dataType:"json",data:data}).success(function(data){"1000"==data.code?($rootScope.tip("退出成功"),localStorage.clear(),state.go("tab.home"),$ionicHistory.clearCache()):($rootScope.tip("退出成功"),$ionicHistory.clearCache(),localStorage.clear(),state.go("tab.home"))}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},$scope.getQb=function(){var data={phone:localStorage.telephone};$http({method:"POST",url:getPrice,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?($scope.amount=data.datas,localStorage.amount=$scope.amount):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},$scope.init=function(){var data={accountID:localStorage.gcid};$http({method:"POST",url:msgSize,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?data.datas>"0"?($scope.data.bageFlg=!0,data.datas>"99"?$scope.data.size="99+":$scope.data.size=data.datas):$scope.data.bageFlg=!1:$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},$scope.upPhoto=function(){$("#avatar_load").bind("change",function(){var $form=$("form")[0],formData=new FormData($form);$ionicLoading.show({template:"头像上传中..."}),$.ajax({type:"POST",enctype:"multipart/form-data",url:upPhoto,data:formData,cache:!1,processData:!1,contentType:!1,success:function(data){"1000"==data.code?($ionicLoading.hide(),$rootScope.tip("上传头像成功"),$scope.data.photo=data.msg,localStorage.gcphoto=data.msg):$rootScope.tip(data.msg)}})})},$scope.upPhoto(),$scope.init(),$scope.getQb()}).controller("UserInfoCtrl",function($scope,$rootScope,$http,$stateParams,tip,req,reqRoot,state,commonFunction){$scope.data={tel:localStorage.telephone,gcnikename:localStorage.gcnikename,gcphoto:localStorage.gcphoto},$scope.frormatRelNm=function(name){return name&&"[object String]"===Object.prototype.toString.call(name)&&""!=name?2==name.length?name.substring(0,1)+"*":name.substring(0,1)+"**":""},$scope.formatIdNo=function(idNo){return idNo&&"[object String]"===Object.prototype.toString.call(idNo)&&""!=idNo?idNo.substring(0,4)+"****"+idNo.substring(idNo.length-4,idNo.length):""},$scope.formatMoblie=function(phone){return phone&&"[object String]"===Object.prototype.toString.call(phone)&&""!=phone?phone.substring(0,3)+"****"+phone.substring(phone.length-4,phone.length):""}}).controller("AccountMCtrl",function($rootScope,$scope,$http,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService){$scope.data={level:1,photo:"img/photo.png",userName:"",totAmt:"0.00",availBal:"0.00",accumulateRevenue:"0.00",srpIntAmt:"0.00",availInvestCouponCnt:"0",payCnt:"0",bidCnt:"0",closeCnt:"0",transferCnt:"0",latestMstRtnDt:"",latestMstRtnLnAmt:"*",dailyRevenue:"0.00",gcphoto:localStorage.gcphoto}}).controller("PasswordMCtrl",function($rootScope,$scope,$timeout,$ionicPopup,$stateParams,$ionicHistory,$http,state,req,reqRoot,tip,sqLiteLoginInfo,commonFunction){$scope.pwdsetflag="1"==localStorage.pwdsetflag,$scope.setJyPass=function(){state.go("setJyPass")},$scope.upPass=function(){state.go("updateLoginPwd")}}).controller("setJyPassCtrl",function($rootScope,$scope,$timeout,$ionicPopup,$stateParams,$ionicHistory,$http,state,req,reqRoot,tip,commonFunction,setbusiness){$scope.business={password:""},$scope.setPassword=function(){if(""!=$scope.business.password){var data={gcphone:localStorage.telephone,jymm:$scope.business.password};$http({method:"POST",url:setbusiness,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.tip("设置交易密码成功"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}else $rootScope.tip("请输入交易密码")}}).controller("upjymmCtrl",function($rootScope,$scope,$timeout,$ionicPopup,$stateParams,$ionicHistory,$http,state,req,reqRoot,tip,commonFunction,setbusiness){$scope.business={password:""},$scope.setPassword=function(){if(""!=$scope.business.password){var data={gcphone:localStorage.telephone,jymm:$scope.business.password};$http({method:"POST",url:setbusiness,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.tip("修改交易密码成功"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}else $rootScope.tip("请输入交易密码")}}).controller("msgCenterCtrl",function($scope,$http,$rootScope,tip,$stateParams,scrollList,$timeout,$ionicScrollDelegate,state,imgUrl,bdList,bdDz,$ionicLoading,$ionicSlideBoxDelegate,msgSize,msgList){var vm=$scope.vm={moredata:!1,messages:[],messagess:[],pagination:{currentPage:1},init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},getData:function(isInit){$ionicLoading.show();var data={accountID:localStorage.gcid,isread:"1",pageIndex:vm.pagination.currentPage,pageSize:"5"};$http({method:"POST",url:msgList,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?(vm.messagess=scrollList.init().add(data.datas),$ionicSlideBoxDelegate.update(),vm.isread(!0)):(vm.messagess=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize(),vm.isread(!1)):(vm.isread(!0),vm.moredata=!0)}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})},isread:function(isInit){$ionicLoading.show();var data={accountID:localStorage.gcid,isread:"0",pageIndex:vm.pagination.currentPage,pageSize:"5"};$http({method:"POST",url:msgList,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?(vm.messages=scrollList.init().add(data.datas),$ionicSlideBoxDelegate.update()):(vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("bdFbCtrl",function($rootScope,$scope,$timeout,$ionicLoading,$ionicPopup,$stateParams,$ionicHistory,$http,state,req,reqRoot,tip,commonFunction,setbusiness,fbBd,bdyl){$scope.bd={miaoshu:"",amount:"",id:0,title:"",temp:""},$scope.ajaxFlg=!0,$("#bdhyid").val(localStorage.gcid),$scope.fbBd=function(){if($scope.bd.miaoshu=$scope.bd.temp+"?"+$scope.bd.title,$("#bdmiaoshu").val($scope.bd.miaoshu),""!=$scope.bd.title)if(""!=$scope.bd.miaoshu)if(""!=$scope.bd.amount)if($scope.bd.amount<=0)$rootScope.tip("悬赏金额不能小于0");else if(localStorage.amount<=0)$rootScope.tip("账户青贝余额不足");else{var $form=$("form")[0],formData=new FormData($form);$scope.ajaxFlg=!1,$ionicLoading.show({template:"榜单发布中..."}),$.ajax({type:"POST",enctype:"multipart/form-data",url:fbBd,data:formData,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},cache:!1,processData:!1,contentType:!1,success:function(data){$scope.ajaxFlg=!0,"1000"==data.code?($ionicLoading.hide(),$rootScope.tip("榜单发布成功"),state.go("tab.home")):$rootScope.tip(data.msg)}})}else $rootScope.tip("请输入悬赏青贝数");else $rootScope.tip("请输入榜单描述");else $rootScope.tip("请输入榜单标题")},$scope.creatImg=function(){$(".fname").on("change",function(e){e.currentTarget.value;var file=e.target.files[0],reader=new FileReader;reader.readAsDataURL(file),reader.onloadend=function(){$(e.currentTarget).prev()[0].src=reader.result,$scope.addImg()}})},$scope.addBr=function(){$scope.bd.miaoshu=$scope.bd.miaoshu+"<br>"},$scope.addkg=function(){$scope.bd.miaoshu=$scope.bd.miaoshu+"&nbsp;"},$scope.addImg=function(){$scope.bd.id++;var html="<div class='item-input item' ><div><img src='img/mine/upimg.png'> <input  style='width: 50px;position: relative; left: -50px;opacity:0;' type='file' name='uploadFile' accept='image/*' class='fname' ng-change='getIMg()' id="+$scope.bd.id+"></div></div>";$("#addImg").append(html),$scope.creatImg()}}).controller("hdFbCtrl",function($rootScope,$ionicLoading,$scope,$timeout,$ionicPopup,$stateParams,$ionicHistory,$http,state,req,reqRoot,tip,commonFunction,setbusiness,hdfb){$scope.bd={hbcontent:"",hbjfje:"",id:0,title:"",temp:""},$scope.ajaxFlg=!0,$("#bdhyid").val(localStorage.gcid),$scope.fbBd=function(){if($scope.bd.hbcontent=$scope.bd.temp+"?"+$scope.bd.title,$("#bdmiaoshu").val($scope.bd.hbcontent),""!=$scope.bd.title)if(""!=$scope.bd.hbcontent)if(""!=$scope.bd.hbjfje){$scope.bd.hbcontent=$scope.bd.hbcontent+"?"+$scope.bd.title,$("#hdmiaoshu").val($scope.bd.hbcontent);var $form=$("form")[0],formData=new FormData($form);$scope.ajaxFlg=!1,$ionicLoading.show({template:"活动发布中..."}),$.ajax({type:"POST",enctype:"multipart/form-data",url:hdfb,data:formData,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},cache:!1,processData:!1,contentType:!1,success:function(data){$scope.ajaxFlg=!0,$ionicLoading.hide(),"1000"==data.code?($rootScope.tip("活动发布成功"),state.go("tab.act")):$rootScope.tip(data.msg)}})}else $rootScope.tip("请输入活动赏金数量");else $rootScope.tip("请输入活动描述");else $rootScope.tip("请输入榜单标题")},$scope.creatImg=function(){$(".fname").on("change",function(e){e.currentTarget.value;var file=e.target.files[0],reader=new FileReader;reader.readAsDataURL(file),reader.onloadend=function(){$(e.currentTarget).prev()[0].src=reader.result}})},$scope.addImg=function(){$scope.bd.id++;var html="<div class='item-input item' ><div><img src='img/mine/upimg.png'> <input  style='width: 50px;position: relative; left: -50px;opacity:0;' type='file' name='uploadFile' accept='image/*' class='fname' ng-change='getIMg()' id="+$scope.bd.id+"></div></div>";$("#addImg").append(html),$scope.creatImg()},$scope.addBr=function(){$scope.bd.hbcontent=$scope.bd.hbcontent+"<br>"},$scope.addkg=function(){$scope.bd.hbcontent=$scope.bd.hbcontent+"&nbsp;"}}).controller("fbJlCtrl",function($rootScope,$scope,$timeout,$ionicPopup,$stateParams,$ionicHistory,$http,state,req,reqRoot,tip,commonFunction,setbusiness,fbJl,scrollList,$ionicLoading){var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},gcphoto:localStorage.gcphoto,tel:localStorage.telephone,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},fbDetail:function(data){state.go("fbDetail",{fbData:JSON.stringify(data)})},getData:function(isInit){$ionicLoading.show();var data={gcaid:localStorage.gcid};$http({method:"POST",url:fbJl,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){if($ionicLoading.hide(),"0"!=data.datas.length)if(isInit){vm.messages=scrollList.init().add(data.datas);for(var i=0;i<data.datas.length;i++){var title=data.datas[i].bdcontent.split("?")[1],cont=data.datas[i].bdcontent.split("?")[0];if(data.datas[i].title=title,data.datas[i].cont=cont,void 0!=data.datas[i].ylzd){var imgTemp=data.datas[i].ylzd.split(";");data.datas[i].imgTemp=imgTemp}}}else vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete");else vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("jbJlCtrl",function($rootScope,$scope,$timeout,$ionicScrollDelegate,$ionicPopup,$stateParams,$ionicHistory,$http,state,req,reqRoot,tip,commonFunction,setbusiness,jbJl,$ionicLoading,scrollList){var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},tel:localStorage.telephone,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},fbDetail:function(data){state.go("fbDetail",{fbData:JSON.stringify(data)})},getData:function(isInit){$ionicLoading.show();var data={gcaid:localStorage.gcid};$http({method:"POST",url:jbJl,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?vm.messages=scrollList.init().add(data.datas):(vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("jbrListCtrl",function($rootScope,$scope,$timeout,$ionicPopup,$stateParams,$ionicHistory,$http,state,req,reqRoot,tip,commonFunction,setbusiness){$scope.business={password:""},$scope.setPassword=function(){if(""!=$scope.business.password){var data={gcphone:localStorage.telephone,jymm:$scope.business.password};$http({method:"POST",url:setbusiness,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.tip("设置交易密码成功"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}else $rootScope.tip("请输入交易密码")}}).controller("resCtrl",function($scope,$http,$ionicPlatform,$stateParams,$ionicPopup,$ionicHistory,$rootScope,state,req,sqLiteLoginInfo,login,getMsg,tip,$ionicLoading){$scope.login={tel:""},$scope.telephone=localStorage.telephone,$scope.checkTel=function(){return!!/^1[2,3,4,5,6,7,8,9,0][0-9]{9}$/.test($scope.login.tel)||($rootScope.tip("请输入正确的手机号码"),!1)},$scope.change=function(){$scope.loginState=!1},$scope.next=function(){if($scope.checkTel()){var data={phoneNO:$scope.login.tel};$ionicLoading.show(),$http({method:"POST",url:getMsg,dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"1000"==data.code?state.go("registerLoginStep11",{tel:$scope.login.tel}):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}}}).controller("LoginCtrl",function($scope,$http,$ionicPlatform,$stateParams,$ionicPopup,$ionicHistory,$rootScope,state,req,sqLiteLoginInfo,login,tip,$ionicLoading){$scope.login={tel:"",loginPwd:""},$scope.registerImg={title:"",linkUrl:"",url:""},$scope.telephone=localStorage.telephone,$scope.checkTel=function(){return!!/^1[2,3,4,5,6,7,8,9,0][0-9]{9}$/.test($scope.login.tel)||($rootScope.tip("请输入正确的手机号码"),!1)},$scope.change=function(){$scope.loginState=!1},$scope.doLogin=function(){$ionicLoading.show();var data={gcpass:$scope.login.loginPwd,gcphone:$scope.login.tel};$http({method:"POST",url:login,dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"1000"==data.code?($rootScope.tip("登录成功"),localStorage.telephone=data.datas.account.gcphone,localStorage.gcphoto=data.datas.account.gcphoto,localStorage.gcnikename=data.datas.account.gcnikename,localStorage.token=data.datas.token,localStorage.gcid=data.datas.account.gcid,state.go("tab.home")):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}}).controller("TabCtrl",function($scope,$stateParams,$http,$rootScope,state,req,reqRoot,tip,sqLiteLoginInfo,baseInfo){$scope.goTab=function(url){state.go(url)}}).controller("projectCtrl",function($rootScope,$scope,$http,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService){var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},tel:localStorage.telephone,gcnikename:localStorage.gcnikename,gcphoto:localStorage.gcphoto,loginFlg:!1,bigImage:!1,url:"",init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},toLogin:function(){state.go("login")},tomemberCenter:function(){state.go("memberCenter")},showBigImage:function(imageName){vm.url=imgUrl+imageName+"",vm.bigImage=!0},hideBigImage:function(){vm.bigImage=!1},dateFormats:function(data){var date=new Date(data),year=date.getFullYear(),month=date.getMonth()+1,strDate=date.getDate();date.getHours(),date.getMinutes(),date.getSeconds();return month>=1&&month<=9&&(month="0"+month),strDate>=0&&strDate<=9&&(strDate="0"+strDate),year+"-"+month+"-"+strDate},hide:function(i){setTimeout(function(){document.getElementsByClassName("gifshow")[i].style.display="none"},1e3)},bdDetail:function(data){state.go("bdDetail",{bdData:JSON.stringify(data)})},getData:function(isInit){$http.get(bdList+"?pageIndex="+vm.pagination.currentPage+"&pageSize=10").success(function(data){if("0"!=data.datas.length)if(isInit){for(var i=0;i<data.datas.length;i++){var imgTemp=data.datas[i].ylzd.split(";");data.datas[i].imgTemp=imgTemp}vm.messages=scrollList.init().add(data.datas)}else vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize();else vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}}}).controller("qbManageCtrl",function($rootScope,$scope,$http,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,getPrice,$cordovaDevice){$scope.amount=0,$scope.getQb=function(){var data={phone:localStorage.telephone};$http({method:"POST",url:getPrice,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?($scope.amount=data.datas,localStorage.amount=$scope.amount):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},$scope.scanCode=function(){cordova.plugins.barcodeScanner.scan(function(result){result.text&&state.go("qbZs",{qbtel:result.text})},function(error){$rootScope.tip("扫码失败: "+error)})},$scope.getQb()}).controller("myewmCtrl",function($rootScope,$scope,$http,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,getPrice,$cordovaDevice,getskm,$ionicLoading){$scope.gcnikename=localStorage.gcnikename,$scope.tel=localStorage.telephone,$scope.gcphoto=localStorage.gcphoto,$ionicLoading.show(),$scope.qbqrcod="",$http({method:"POST",url:getskm,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json"}).success(function(data){$ionicLoading.hide(),"1000"==data.code?$scope.qbqrcod=data.datas:$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}).controller("meActCtrl",function($scope,$http,$rootScope,meAct,imgUrl,tip,$stateParams,scrollList,msgSize,$timeout,$ionicScrollDelegate,state,$ionicPopup,imgUrl,bdList,bdDz,$ionicLoading,$ionicSlideBoxDelegate,$cordovaStatusbar){var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},tel:localStorage.telephone,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},getData:function(isInit){$ionicLoading.show();$http({method:"POST",url:meAct,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:{type:"0"}}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?vm.messages=scrollList.init().add(data.datas):(vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("meJoinActCtrl",function($scope,$http,$rootScope,meAct,tip,$stateParams,scrollList,msgSize,$timeout,$ionicScrollDelegate,state,$ionicPopup,imgUrl,bdList,bdDz,$ionicLoading,$ionicSlideBoxDelegate,$cordovaStatusbar){var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},tel:localStorage.telephone,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},getData:function(isInit){$ionicLoading.show();$http({method:"POST",url:meAct,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:{type:"1"}}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?vm.messages=scrollList.init().add(data.datas):(vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("qbZcCtrl",function($rootScope,$scope,$http,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,qbcs,qbcs2,imgUrl,$ionicLoading){$scope.business={dfPhone:$stateParams.qbtel,amount:"",qbpass:"",bz:""},$scope.datas={nikename:"",photo:"",imgUrl:imgUrl},$scope.jy1Flg=!0,$scope.jy2Flg=!1,$scope.savaQb=function(){if(""!=$scope.business.dfPhone)if(""!=$scope.business.amount){var data={phone:localStorage.telephone,amount:$scope.business.amount,dfPhone:$scope.business.dfPhone,qbjysm:$scope.business.bz};$ionicLoading.show(),$http({method:"POST",url:qbcs,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"1000"==data.code?($scope.datas=data.datas,$scope.jy1Flg=!1,$scope.jy2Flg=!0):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}else $rootScope.tip("请输入转赠金额");else $rootScope.tip("请输入转赠人账号")},$scope.goQb=function(){if(""!=$scope.business.qbpass){var data={phone:localStorage.telephone,amount:$scope.business.amount,dfPhone:$scope.business.dfPhone,qbjysm:$scope.business.bz,qbpass:$scope.business.qbpass};$ionicLoading.show(),$http({method:"POST",url:qbcs2,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"1000"==data.code?($rootScope.tip("转赠成功"),$scope.jy1Flg=!0,$scope.jy2Flg=!1,state.go("qbManage")):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}else $rootScope.tip("请输入交易密码")}}).controller("qbJlCtrl",function($rootScope,$scope,$http,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,qbjl,scrollList,$ionicLoading){var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},tel:localStorage.telephone,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},jyDetail:function(data){state.go("qbJlDetail",{qbData:JSON.stringify(data)})},getData:function(isInit){$ionicLoading.show();var data={gcaid:localStorage.gcid};$http({method:"POST",url:qbjl,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?vm.messages=scrollList.init().add(data.datas):(vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("mebqSellCtrl",function($rootScope,$scope,scrollList,$ionicLoading,$http,$timeout,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,meMarket,qrjy,qxjy){$scope.nowDate=function(){return new Date};var vm=$scope.vm={moredata:!1,messages:[],messagess:[],showFlg:0,title:$stateParams.title,id:$stateParams.id,pagination:{perPage:10,currentPage:1},ajaxEnd:!1,type:$stateParams.bidId,init:function(b){vm.pagination.currentPage=1,vm.getData(!0),vm.getDatas(!0),vm.moredata=!1},menuOn:function(index){vm.showFlg=index},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1),vm.getDatas(!1)},500)},getData:function(isInit){var data={pageIndex:vm.pagination.currentPage,pageSize:"20"};$ionicLoading.show(),$http({method:"POST",url:meMarket,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},data:data,dataType:"json"}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?vm.messages=scrollList.init().add(data.datas):(vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})},getDatas:function(isInit){var data={pageIndex:vm.pagination.currentPage,pageSize:"20",type:2};$ionicLoading.show(),$http({method:"POST",url:meMarket,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},data:data,dataType:"json"}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?vm.messagess=scrollList.init().add(data.datas):(vm.messagess=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})},qrjy:function(id){var data={jyid:id};$http({method:"POST",url:qrjy,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?(vm.getData(!0),$rootScope.tip("交易成功")):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},qxjy:function(id){var data={jyid:id};$http({method:"POST",url:qxjy,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?(vm.getData(!0),$rootScope.tip("取消成功")):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}};vm.init(1)}).controller("marketCtrl",function($rootScope,$scope,$ionicScrollDelegate,scrollList,getPrice,$ionicLoading,$http,$timeout,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,marketList,marketTotle,buyMbq){$scope.nowDate=function(){return new Date};var vm=$scope.vm={moredata:!1,amount:"",messages:[],title:$stateParams.title,id:$stateParams.id,pagination:{perPage:10,currentPage:1},data:"",ajaxEnd:!1,type:$stateParams.bidId,init:function(b){vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},getData:function(isInit){var data={pageIndex:vm.pagination.currentPage,pageSize:"5"};$ionicLoading.show(),$http({method:"POST",url:marketList,data:data,dataType:"json"}).success(function(data){$ionicLoading.hide(),"0"!=data.datas.length?isInit?vm.messages=scrollList.init().add(data.datas):(vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize()):vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})},marketTotle:function(){$http({method:"POST",url:marketTotle,dataType:"json"}).success(function(data){"1000"==data.code?vm.data=data.datas:$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},getQb:function(){var data={phone:localStorage.telephone};$http({method:"POST",url:getPrice,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?vm.amount=data.datas:$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},qbdh:function(qbData){$ionicPopup.confirm({title:"提示",template:"出售总金额为:"+Number(qbData.qbscrmb*qbData.qbscshuliang).toFixed(2)+"RMB<br>请联系收购者："+qbData.gcnikename+'<br>电话：<a  href="tel:'+qbData.gcphone+' ">'+qbData.gcphone+"</a></div>",okText:"确认兑换",cancelText:"取消"}).then(function(res){if(res){var data={jyid:qbData.qbscid};$http({method:"POST",url:buyMbq,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.tip("已通知出售者"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}})},qbgm:function(qbData){vm.amount>qbData.qbscshuliang?$ionicPopup.confirm({title:"提示",template:"购买总金额为:"+Number(qbData.qbscrmb*qbData.qbscshuliang).toFixed(2)+"RMB<br>请联系收购者："+qbData.gcnikename+'<br>电话：<a  href="tel:'+qbData.gcphone+' ">'+qbData.gcphone+"</a></div>",okText:"确认购买",cancelText:"取消"}).then(function(res){if(res){var data={jyid:qbData.qbscid};$http({method:"POST",url:buyMbq,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.tip("已通知出售者"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}}):$rootScope.tip("可售卖数量不足")}};vm.init(1),vm.marketTotle(),""!=localStorage.telephone&&void 0!=localStorage.telephone&&vm.getQb()}).controller("actCtrl",function($rootScope,$scope,$http,$timeout,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,queryAct,scrollList,$ionicLoading,imgUrl){$scope.showFlg=0,$scope.menuOn=function(index){$scope.showFlg=index};var vm=$scope.vm={moredata:!1,messages:[],pagination:{currentPage:1},tel:localStorage.telephone,gcnikename:localStorage.gcnikename,gcphoto:localStorage.gcphoto,loginFlg:!1,bigImage:!1,url:"",slidImg:"",hidetabs:!1,dZFlg:!1,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},toLogin:function(){state.go("login")},tomemberCenter:function(){state.go("memberCenter")},myScrollL:function(){new Swiper(".swiper-container",{loop:!0,pagination:{el:".swiper-pagination"},scrollbar:{el:".swiper-scrollbar"}})},showBigImage:function(imageName){vm.url="http://39.97.234.111/base/userFiles/hdImg/"+imageName,vm.bigImage=!0},hideBigImage:function(){vm.bigImage=!1},dateFormats:function(data){var date=new Date(data),year=date.getFullYear(),month=date.getMonth()+1,strDate=date.getDate();date.getHours(),date.getMinutes(),date.getSeconds();return month>=1&&month<=9&&(month="0"+month),strDate>=0&&strDate<=9&&(strDate="0"+strDate),year+"-"+month+"-"+strDate},dianzan:function(id,index){$http.get(bdDz+"?bdid="+id).success(function(data){if("1000"==data.code){for(var aElements=document.getElementsByClassName("dzimg"),aElementsize=document.getElementsByClassName("dzsize"),aElement1s=document.getElementsByClassName("gifshow"),i=0;i<aElements.length;i++)if(aElements[i].getAttribute("imgindex")==index){aElements[i].src="img/bd/List_praise_on.png";var size=aElementsize[i].innerHTML;aElementsize[i].innerHTML=parseInt(size)+parseInt("1")}for(i=0;i<aElement1s.length;i++)if(aElement1s[i].getAttribute("gifShow")==index)return aElement1s[i].style.display="block",vm.index=i,void vm.hide(i)}}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},hide:function(i){setTimeout(function(){document.getElementsByClassName("gifshow")[i].style.display="none"},1e3)},bdDetail:function(data){state.go("hdDetail",{hdData:JSON.stringify(data)})},getData:function(isInit){var data={pageIndex:vm.pagination.currentPage,pageSize:"10"};$ionicLoading.show(),$http({method:"POST",url:queryAct,data:data,dataType:"json"}).success(function(data){if($ionicLoading.hide(),"0"!=data.datas.length)if(isInit){for(var i=0;i<data.datas.length;i++){var title=data.datas[i].hbcontent.split("?")[1],cont=data.datas[i].hbcontent.split("?")[0];if(data.datas[i].title=title,data.datas[i].cont=cont,void 0!=data.datas[i].hbimgpath){var imgTemp=data.datas[i].hbimgpath.split(";");data.datas[i].imgTemp=imgTemp}}vm.messages=scrollList.init().add(data.datas)}else vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize();else vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("qbJlDetailCtrl",function($scope,$location,$http,$stateParams,$interval,$ionicPopup,$rootScope,req,reqRoot,tip,state,balance,httpService,_responseData,sqLiteLoginInfo,bdMsgList,imgUrl,bdDz,bdjb,plbd){$scope.vm={moredata:!1,messages:[JSON.parse($stateParams.qbData)]}}).controller("actManageCtrl",function($scope,$http,$rootScope,meAct,tip,$stateParams,scrollList,msgSize,$timeout,$ionicScrollDelegate,state,$ionicPopup,imgUrl,bdList,bdDz,$ionicLoading,$ionicSlideBoxDelegate,$cordovaStatusbar){$scope.showFlg=0,$scope.menuOn=function(index){$scope.showFlg=index};var vm=$scope.vm={moredata:!1,messages:[],messagesJoin:[],pagination:{currentPage:1},tel:localStorage.telephone,init:function(b){""!=vm.tel&&void 0!=vm.tel&&(vm.loginFlg=!0),vm.pagination.currentPage=1,vm.getData(!0),vm.getDatas(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1),vm.getDatas(!1)},500)},nowDate:function(){return new Date},getDatas:function(isInit){$ionicLoading.show();$http({method:"POST",url:meAct,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:{type:"1"}}).success(function(data){if($ionicLoading.hide(),"0"!=data.datas.length)if(isInit){for(var i=0;i<data.datas.length;i++){var title=data.datas[i].hbcontent.split("?")[1],cont=data.datas[i].hbcontent.split("?")[0];if(data.datas[i].title=title,data.datas[i].cont=cont,void 0!=data.datas[i].hbimgpath){var imgTemp=data.datas[i].hbimgpath.split(";");data.datas[i].imgTemp=imgTemp}}vm.messagesJoin=scrollList.init().add(data.datas)}else vm.messagesJoin=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize();else vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})},getData:function(isInit){$ionicLoading.show();$http({method:"POST",url:meAct,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:{type:"2"}}).success(function(data){if($ionicLoading.hide(),"0"!=data.datas.length)if(isInit){for(var i=0;i<data.datas.length;i++){var title=data.datas[i].hbcontent.split("?")[1],cont=data.datas[i].hbcontent.split("?")[0];if(data.datas[i].title=title,data.datas[i].cont=cont,void 0!=data.datas[i].hbimgpath){var imgTemp=data.datas[i].hbimgpath.split(";");data.datas[i].imgTemp=imgTemp}}vm.messages=scrollList.init().add(data.datas)}else vm.messages=scrollList.add(data.datas),$scope.$broadcast("scroll.infiniteScrollComplete"),$ionicScrollDelegate.resize();else vm.moredata=!0}).error(function(error){if($rootScope.tip("网络忙，请稍后再试……"),!isInit){var positon=$ionicScrollDelegate.getScrollPosition();$ionicScrollDelegate.scrollTo(0,.9*positon.top),$scope.$broadcast("scroll.infiniteScrollComplete")}})}};vm.init(1)}).controller("fbDetailCtrl",function($scope,$location,$timeout,$http,$stateParams,$interval,$ionicPopup,$rootScope,req,reqRoot,tip,state,balance,httpService,_responseData,sqLiteLoginInfo,scrollList,$ionicLoading,bdDetailJl,ljjb,imgUrl){var vm=$scope.vm={moredata:!1,qbpass:"",messages:[JSON.parse($stateParams.fbData)],pagination:{currentPage:1},tel:localStorage.telephone,gcnikename:localStorage.gcnikename,gcphoto:localStorage.gcphoto,loginFlg:!1,bigImage:!1,url:"",dZFlg:!1,lyList:[],bdplcontent:"",accountID:"",showFlg:!1,qbpass:"",init:function(b){vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},showBigImage:function(imageName){vm.url=imgUrl+imageName+"",vm.bigImage=!0},keyBoardUp:function($event){ionic.Platform.isIOS()&&(document.getElementsByClassName("counselor-pop")[0].style.top="-30%")},jiebang:function(id){vm.accountID=id,$ionicPopup.show({template:'<input type="password" class="counselor-pop" ng-click="vm.keyBoardUp($event)" placeholder="请输入青贝密码" ng-model="vm.qbpass" name="vm.qbpass"    >',cssClass:"counselor-pop",title:"",scope:$scope,buttons:[{text:"×"},{text:"<b>确认结算榜单</b>",type:"button-positive",onTap:function(e){if(""!=vm.qbpass)return vm.qbpass;$rootScope.tip("请输入密码"),e.preventDefault()}}]}).then(function(res){if(res){var data={accountID:vm.accountID,bdid:vm.messages[0].bdid,qbpass:vm.qbpass};$http({method:"POST",url:ljjb,data:data,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json"}).success(function(data){"1000"==data.code?$rootScope.tip("结榜成功"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}})},hideBigImage:function(){vm.bigImage=!1},hide:function(i){setTimeout(function(){document.getElementsByClassName("gifshow")[i].style.display="none"},1e3)},getData:function(isInit){$http({method:"POST",url:bdDetailJl+"?bdid="+vm.messages[0].bdid,dataType:"json"}).success(function(data){"1000"==data.code?vm.lyList=data.datas:$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}};vm.init(1)}).controller("bdDetailCtrl",function($scope,$location,$http,$stateParams,$interval,$ionicPopup,$rootScope,req,reqRoot,tip,state,balance,httpService,_responseData,sqLiteLoginInfo,bdMsgList,imgUrl,bdDz,bdjb,plbd){var vm=$scope.vm={moredata:!1,messages:[JSON.parse($stateParams.bdData)],pagination:{currentPage:1},tel:localStorage.telephone,gcnikename:localStorage.gcnikename,gcphoto:localStorage.gcphoto,loginFlg:!1,bigImage:!1,url:"",dZFlg:!1,lyList:[],qbpass:"",bdplcontent:"",init:function(b){vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},toLogin:function(){state.go("login")},tomemberCenter:function(){state.go("memberCenter")},showBigImage:function(imageName){vm.url=imgUrl+imageName+"",vm.bigImage=!0},keyBoardUp:function($event){ionic.Platform.isIOS()&&(document.getElementsByClassName("counselor-pop")[0].style.top="-30%")},jiebang:function(){var data={bangdanid:vm.messages[0].bdid};$http({method:"POST",url:bdjb,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.tip("揭榜成功"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},showPop:function(){$ionicPopup.show({template:'<textarea rows="8" cols="20" placeholder="请输入评论信息" ng-click="keyBoardUp($event)" ng-focus="resizeHeight()" ng-blur="recoveryHeight()" ng-model="vm.bdplcontent"></textarea>',cssClass:"counselor-pop",title:"",scope:$scope,buttons:[{text:"×"},{text:"<b>确定发送</b>",type:"button-positive",onTap:function(e){if(""!=vm.bdplcontent)return vm.bdplcontent;$rootScope.tip("请输入评论信息"),e.preventDefault()}}]}).then(function(res){if(res){var data={bdid:vm.messages[0].bdid,bdplcontent:vm.bdplcontent,bdplrid:localStorage.gcid,bdplrnikename:localStorage.gcnikename};$http({method:"POST",url:plbd,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?(vm.init(1),$rootScope.tip("评论成功")):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}})},hideBigImage:function(){vm.bigImage=!1},dateFormats:function(data){var date=new Date(data),year=date.getFullYear(),month=date.getMonth()+1,strDate=date.getDate();date.getHours(),date.getMinutes(),date.getSeconds();return month>=1&&month<=9&&(month="0"+month),strDate>=0&&strDate<=9&&(strDate="0"+strDate),year+"-"+month+"-"+strDate},dianzan:function(id,index){$http.get(bdDz+"?bdid="+id).success(function(data){if("1000"==data.code){for(var aElements=document.getElementsByClassName("dzimg"),aElementsize=document.getElementsByClassName("dzsize"),aElement1s=document.getElementsByClassName("gifshow"),i=0;i<aElements.length;i++)if(aElements[i].getAttribute("imgindex")==index){aElements[i].src="img/bd/List_praise_on.png";var size=aElementsize[i].innerHTML;aElementsize[i].innerHTML=parseInt(size)+parseInt("1")}for(i=0;i<aElement1s.length;i++)if(aElement1s[i].getAttribute("gifShow")==index)return aElement1s[i].style.display="block",vm.index=i,void vm.hide(i)}}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},hide:function(i){setTimeout(function(){document.getElementsByClassName("gifshow")[i].style.display="none"},1e3)},bdDetail:function(data){state.go("bdDetail",{bdData:JSON.stringify(data)})},getData:function(isInit){$http.get(bdMsgList+"?bdid="+vm.messages[0].bdid).success(function(data){"0"!=data.datas.length?isInit&&(vm.lyList=data.datas):vm.moredata=!0}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}};vm.init(1)}).controller("hdDetailCtrl",function($scope,$location,$http,$stateParams,$interval,$ionicPopup,$rootScope,req,reqRoot,tip,state,balance,httpService,_responseData,sqLiteLoginInfo,bdMsgList,imgUrl,bdDz,bdjb,canjiaAct){var vm=$scope.vm={moredata:!1,messages:[JSON.parse($stateParams.hdData)],pagination:{currentPage:1},tel:localStorage.telephone,gcnikename:localStorage.gcnikename,gcphoto:localStorage.gcphoto,loginFlg:!1,bigImage:!1,url:"",dZFlg:!1,lyList:[],qbpass:"",bdplcontent:"",init:function(b){vm.pagination.currentPage=1,vm.getData(!0),vm.moredata=!1},doRefresh:function(){$timeout(function(){vm.init(),$scope.$broadcast("scroll.refreshComplete")},200)},loadMore:function(){$timeout(function(){vm.pagination.currentPage++,vm.getData(!1)},500)},nowDate:function(){return new Date},toLogin:function(){state.go("login")},tomemberCenter:function(){state.go("memberCenter")},showBigImage:function(imageName){vm.url="http://39.97.234.111/base/userFiles/hdImg/"+imageName,vm.bigImage=!0},keyBoardUp:function($event){ionic.Platform.isIOS()&&(document.getElementsByClassName("counselor-pop")[0].style.top="-30%")},joinAct:function(){if(vm.messages[0].hbjfje>0)vm.jiebang();else{var data={huodongid:vm.messages[0].hdid,cyrid:localStorage.gcid};$http({method:"POST",url:canjiaAct,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.tip("参加成功"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}},jiebang:function(id){vm.accountID=id,$ionicPopup.show({template:'<input type="password" class="counselor-pop" ng-click="vm.keyBoardUp($event)" placeholder="请输入青贝密码" ng-model="vm.qbpass" name="vm.qbpass"    >',cssClass:"counselor-pop",title:"",scope:$scope,buttons:[{text:"×"},{text:"<b>确认参加活动</b>",type:"button-positive",onTap:function(e){if(""!=vm.qbpass)return vm.qbpass;$rootScope.tip("请输入密码"),e.preventDefault()}}]}).then(function(res){if(res){var data={huodongid:vm.messages[0].hdid,cyrid:localStorage.gcid,jymm:vm.qbpass};$http({method:"POST",url:canjiaAct,data:data,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json"}).success(function(data){"1000"==data.code?$rootScope.tip("参加成功"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}})},hideBigImage:function(){vm.bigImage=!1},dateFormats:function(data){var date=new Date(data),year=date.getFullYear(),month=date.getMonth()+1,strDate=date.getDate();date.getHours(),date.getMinutes(),date.getSeconds();return month>=1&&month<=9&&(month="0"+month),strDate>=0&&strDate<=9&&(strDate="0"+strDate),year+"-"+month+"-"+strDate},dianzan:function(id,index){$http.get(bdDz+"?bdid="+id).success(function(data){if("1000"==data.code){for(var aElements=document.getElementsByClassName("dzimg"),aElementsize=document.getElementsByClassName("dzsize"),aElement1s=document.getElementsByClassName("gifshow"),i=0;i<aElements.length;i++)if(aElements[i].getAttribute("imgindex")==index){aElements[i].src="img/bd/List_praise_on.png";var size=aElementsize[i].innerHTML;aElementsize[i].innerHTML=parseInt(size)+parseInt("1")}for(i=0;i<aElement1s.length;i++)if(aElement1s[i].getAttribute("gifShow")==index)return aElement1s[i].style.display="block",vm.index=i,void vm.hide(i)}}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},hide:function(i){setTimeout(function(){document.getElementsByClassName("gifshow")[i].style.display="none"},1e3)},bdDetail:function(data){state.go("bdDetail",{bdData:JSON.stringify(data)})},getData:function(isInit){$http.get(bdMsgList+"?bdid="+vm.messages[0].bdid).success(function(data){"0"!=data.datas.length?isInit&&(vm.lyList=data.datas):vm.moredata=!0}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}}}).controller("RegisterLoginStep11Ctrl",function($rootScope,$scope,$stateParams,$interval,$ionicHistory,$ionicPopup,$http,sqLiteLoginInfo,req,reqRoot,state,tip,register,getMsg,$ionicLoading,$cordovaToast){$scope.register={msgCode:"",ciKey:"",tel:$stateParams.tel,gcnikename:"",gcpass:""},$scope.getMsgCode=function(){var data={phoneNO:$stateParams.tel};$ionicLoading.show(),$http({method:"POST",url:getMsg,dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"1000"==data.code?$rootScope.tip("短信验证码发送成功"):$rootScope.tip(data.returnMsg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},$scope.goRegisterView=function(){$rootScope.RLType="0",$rootScope.goBackView()},$scope.next=function(){if(""!=$scope.register.msgCode)if(""!=$scope.register.gcnikename)if(""!=$scope.register.gcpass){var data={gcnikename:$scope.register.gcnikename,gcpass:$scope.register.gcpass,gcphone:$stateParams.tel,validateCode:$scope.register.msgCode};$ionicLoading.show(),$http({method:"POST",url:register,dataType:"json",data:data}).success(function(data){$ionicLoading.hide(),"1000"==data.code?($rootScope.tip("注册成功"),state.go("login")):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}else $rootScope.tip("请输入密码");else $rootScope.$rootScope.tip("请输入昵称");else $rootScope.tip("请输入短信验证码")}}).controller("upPassCtrl",function($rootScope,$scope,$http,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,updateMsg,addPass){$scope.login={gcphone:localStorage.telephone,validateCode:"",gcpass:""},$scope.checkTel=function(){return!!/^1[2,3,4,5,6,7,8,9,0][0-9]{9}$/.test($scope.login.gcphone)||($rootScope.tip("请输入正确的手机号码"),!1)},$scope.formatMoblie=function(phone){return phone&&"[object String]"===Object.prototype.toString.call(phone)&&""!=phone?phone.substring(0,3)+"****"+phone.substring(phone.length-4,phone.length):""},$scope.change=function(){$scope.loginState=!1},$scope.getMsgCode=function(){if($scope.checkTel()||!$scope.gCode){var data={phoneNO:$scope.login.gcphone};$http({method:"POST",url:updateMsg,dataType:"json",data:data}).success(function(data){"1000"==data.code||$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}},$scope.next=function(){if($scope.checkTel()){var data={gcphone:$scope.login.gcphone,validateCode:$scope.login.validateCode,gcpass:$scope.login.gcpass};$http({method:"POST",url:addPass,dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.tip("修改成功"):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}}}).controller("meScListCtrl",function($rootScope,$scope,$http,getPrice,meSc,$stateParams,$ionicHistory,$ionicPopup,state,req,reqRoot,_responseData,sqLiteLoginInfo,zcInfo,tip,httpService,updateMsg,addPass){$scope.amount=0,$scope.goSc=function(){$ionicPopup.confirm({title:"提示",template:"天资禀赋测试，每次扣除500MQB,点击确认将会扣费，中途退出不予退还",okText:"确认测评",cancelText:"取消"}).then(function(res){if(res)if($scope.amount>=500){var data={phone:localStorage.telephone};$http({method:"POST",url:meSc,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.inAppBrowserRef.openUrl("http://app.you121.top/strength/show.php?action=totest&data="+data.datas.data):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})}else $rootScope.tip("青贝余额不足")})},$scope.cpjl=function(){var data={phone:localStorage.telephone,type:"2"};$http({method:"POST",url:meSc,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$rootScope.inAppBrowserRef.openUrl("http://app.you121.top/strength/show.php?action=totest&data="+data.datas.data):$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},$scope.getQb=function(){var data={phone:localStorage.telephone};$http({method:"POST",url:getPrice,headers:{Authorization:localStorage.token,phoneNO:localStorage.telephone},dataType:"json",data:data}).success(function(data){"1000"==data.code?$scope.amount=data.datas:$rootScope.tip(data.msg)}).error(function(error){$rootScope.tip("网络忙，请稍后再试……")})},$scope.getQb()}).controller("rcDetailCtrl",function($scope,$location,$http,$stateParams,$interval,$ionicPopup,$rootScope,req,reqRoot,tip,state,balance,httpService,_responseData,sqLiteLoginInfo,bdMsgList,imgUrl,bdDz,bdjb,plbd){$scope.messages=JSON.parse($stateParams.rcData),$scope.showFlg=!0,$scope.open=function(){1==$scope.showFlg?$scope.showFlg=!1:$scope.showFlg=!0}}).filter("pointFormat",function(){return function(num){var numToString=num+"",dotNum=numToString.indexOf(".");return-1==dotNum?numToString+".00":numToString.substring(0,dotNum+3)}}).filter("dateFormat",function(){return function(num){return num.substring(0,4)+"-"+num.substring(4,6)+"-"+num.substring(6,8)}}).filter("dateFormat",function(){return function(num){return num.substring(0,4)+"-"+num.substring(4,6)+"-"+num.substring(6,8)}}),angular.module("starter.config",[]).constant("configFile","https://www.he-pai.cn/app/www/chcp.json").constant("serveRoot","https://www.he-pai.cn/app/").constant("reqRoot","http://10.10.16.23:8800/mobiserver/api/newCall.do").constant("getMsg","http://www.qsgjgcs.com/userLoginGetValidateCode").constant("register","http://www.qsgjgcs.com/userRegister").constant("login","http://www.qsgjgcs.com/userLoginIn").constant("updateMsg","http://www.qsgjgcs.com/userRnoForRePass").constant("addPass","http://www.qsgjgcs.com/userRePass").constant("upPhoto","http://www.qsgjgcs.com/userRePhoto").constant("exitLogin","http://www.qsgjgcs.com/userLoginOut").constant("bdMsgList","http://www.qsgjgcs.com/bangdan/queryPL").constant("imgUrl","http://39.97.234.111/base/userFiles/bdImg/").constant("bdDz","http://www.qsgjgcs.com/bangdan/dataZan").constant("bdList","http://www.qsgjgcs.com/bangdan/dataList").constant("bdjb","http://www.qsgjgcs.com/bangdan/needLogin/jiebang").constant("plbd","http://www.qsgjgcs.com/bangdan/needLogin/addReview").constant("setbusiness","http://www.qsgjgcs.com/user/needLogin/jymm").constant("getPrice","http://www.qsgjgcs.com/qingbei/needLogin/queryAmount").constant("qbcs","http://www.qsgjgcs.com/qingbei/needLogin/qingBeiZZFirst").constant("qbcs2","http://www.qsgjgcs.com/qingbei/needLogin/qingBeiZZSecond").constant("qbjl","http://www.qsgjgcs.com/qingbei/needLogin/qingBeiJYList").constant("getskm","http://www.qsgjgcs.com/qingbei/needLogin/qrcode").constant("fbBd","http://www.qsgjgcs.com/bangdan/needLogin/add").constant("jbJl","http://www.qsgjgcs.com/bangdan/needLogin/jbList").constant("fbJl","http://www.qsgjgcs.com/bangdan/needLogin/fbList").constant("bdDetailJl","http://www.qsgjgcs.com/bangdan/needLogin/bdjbrList").constant("ljjb","http://www.qsgjgcs.com/bangdan/needLogin/fbrJieBang").constant("bdyl","http://www.qsgjgcs.com/bangdan/needLogin/imgPrv").constant("hdfb","http://www.qsgjgcs.com/activity/needLogin/add").constant("queryAct","http://www.qsgjgcs.com/activity/queryData").constant("canjiaAct","http://www.qsgjgcs.com/activity/needLogin/cyhd"),angular.module("starter.services",[]).factory("sqLiteLoginInfo",function($ionicPlatform,$cordovaSQLite,$window,$ionicPopup,$rootScope,$http,reqRoot,req,tip){var db;return{initDb:function(){$ionicPlatform.ready(function(){db=window.cordova?$cordovaSQLite.openDB({name:"hpApp.db",iosDatabaseLocation:"default"}):window.openDatabase("hpApp.db","1","my",104857600),$cordovaSQLite.execute(db,"CREATE TABLE IF NOT EXISTS loginInfo (id integer primary key, sessionId text, signKey text , gesturePwd text , gesturePwdTime text , gesturePwdErrorTime text)"),$cordovaSQLite.execute(db,"CREATE TABLE IF NOT EXISTS userInfo (id integer primary key, ciNo text ,ciNm text, ciType text , idType text ,idNo text, petNm text,auhStsBit text,busLmt text,photo text,mbPhn text,email text,prsCd text,rcmCd text,ciRelNm text,isSetTradePwd text,isApplyCert text,isSignCertAuth text,isNrd text,canToNrd text)"),$cordovaSQLite.execute(db,"SELECT * FROM loginInfo ").then(function(res){0==res.rows.length&&$cordovaSQLite.execute(db,"INSERT INTO loginInfo (sessionId, signKey,gesturePwd,gesturePwdTime,gesturePwdErrorTime) VALUES (?,?,?,?,?)",["","","","",""]).then(function(res){},function(err){tip(err)})}),$cordovaSQLite.execute(db,"SELECT * FROM userInfo ").then(function(res){0==res.rows.length&&$cordovaSQLite.execute(db,"INSERT INTO userInfo (ciNo,ciNm,ciType,idType,idNo,petNm,auhStsBit,busLmt,photo,mbPhn,email,prsCd,rcmCd,ciRelNm,isSetTradePwd,isApplyCert,isSignCertAuth,isNrd,canToNrd) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)",["","","","","","","","","","","","","","","","","","",""]).then(function(res){},function(err){tip(err)})})})},getSessionId:function(callBack){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"SELECT sessionId FROM loginInfo").then(function(res){callBack&&callBack(res.rows.length>0?res.rows.item(0).sessionId:"")},function(err){tip(err)})})},getSignKey:function(callBack){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"SELECT signKey FROM loginInfo").then(function(res){callBack&&callBack(res.rows.length>0?res.rows.item(0).signKey:"")},function(err){tip(err)})})},getGesturePwd:function(callBack){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"SELECT gesturePwd FROM loginInfo").then(function(res){callBack&&callBack(res.rows.length>0?res.rows.item(0).gesturePwd:"")},function(err){tip(err)})})},getGesturePwdErrorTime:function(callBack){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"SELECT gesturePwdErrorTime FROM loginInfo").then(function(res){callBack&&callBack(res.rows.length>0?res.rows.item(0).gesturePwdErrorTime:"")},function(err){tip(err)})})},getGesturePwdTime:function(callBack){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"SELECT gesturePwdTime FROM loginInfo").then(function(res){callBack&&callBack(res.rows.length>0?res.rows.item(0).gesturePwdTime:"")},function(err){tip(err)})})},setGesturePwd:function(pwd,callBack){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"update  loginInfo set gesturePwd=?",[pwd]).then(function(res){callBack&&callBack()},function(err){tip(err)})})},setGesturePwdErrorTime:function(times,callBack){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"update  loginInfo set gesturePwdErrorTime=?",[times]).then(function(res){callBack&&callBack()},function(err){tip(err)})})},setGesturePwdTime:function(time,callBack){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"update  loginInfo set gesturePwdTime=?",[time]).then(function(res){callBack&&callBack()},function(err){tip(err)})})},login:function(data,callBack){$ionicPlatform.ready(function(){var sessionId=data.sessionId||"",signKey=data.signKey||"",ciNo=data.ciNo||"",ciNm=data.ciNm||"",ciType=data.ciType||"",idType=data.idType||"",idNo=data.idNo||"",petNm=data.petNm,auhStsBit=data.auhStsBit||"",busLmt=data.busLmt||"",photo=data.photo||"",mbPhn=data.mbPhn||"",email=data.email||"",prsCd=data.prsCd||"",rcmCd=data.rcmCd,ciRelNm=data.ciRelNm||"",isSetTradePwd=data.isSetTradePwd||"",isApplyCert=data.isApplyCert||"",isSignCertAuth=data.isSignCertAuth||"",isNrd=data.isNrd||"",canToNrd=data.canToNrd||"";$cordovaSQLite.execute(db,"update loginInfo set sessionId = ? , signKey = ?",[sessionId,signKey]).then(function(res){$rootScope.logined=1,$cordovaSQLite.execute(db,"update userInfo set ciNo = ?,ciNm = ?,ciType = ?,idType = ?,idNo = ?,petNm = ?,auhStsBit = ?,busLmt = ?,photo = ?,mbPhn = ?,email = ?,prsCd = ?,rcmCd = ?,ciRelNm = ?,isSetTradePwd = ?,isApplyCert = ?,isSignCertAuth = ?,isNrd = ?,canToNrd = ?",[ciNo,ciNm,ciType,idType,idNo,petNm,auhStsBit,busLmt,photo,mbPhn,email,prsCd,rcmCd,ciRelNm,isSetTradePwd,isApplyCert,isSignCertAuth,isNrd,canToNrd]).then(function(res){callBack&&callBack()},function(err){tip(err)})},function(err){tip(err)})})},exitLogin:function(callback){$ionicPlatform.ready(function(){req.deviceInfo().then(function(deviceInfo){$http.post(reqRoot,{id:req.id(),MethodCode:req.MethodCode("AUM008"),signInfo:req.signInfo({sessionId:deviceInfo.sessionId},deviceInfo.signKey),time:req.time(),imei:deviceInfo.imei,APPID:deviceInfo.APPID,APPVER:deviceInfo.APPVER,MVER:req.MVER(),MTYPE:req.MTYPE(),PMODEL:deviceInfo.PMODEL,PBRAND:deviceInfo.PBRAND,chid:deviceInfo.chid,body:{sessionId:deviceInfo.sessionId}}).success(function(data){"0"==data.returnCode?$cordovaSQLite.execute(db,'update loginInfo set sessionId = "", signKey = "", gesturePwd = "", gesturePwdTime = ""').then(function(res){$rootScope.logined=0,$cordovaSQLite.execute(db,"update userInfo set ciNo = ?,ciNm = ?,ciType = ?,idType = ?,idNo = ?,petNm = ?,auhStsBit = ?,busLmt = ?,photo = ?,mbPhn = ?,email = ?,prsCd = ?,rcmCd = ?,ciRelNm = ?,isSetTradePwd = ?,isApplyCert = ?,isSignCertAuth = ?,isNrd = ?,canToNrd = ?",["","","","","","","","","","","","","","","","","","",""]).then(function(res){tip("退出成功",function(){callback&&callback(),localStorage.setItem("fromNrdtoMain","0"),localStorage.isFirstLogined="0",localStorage.removeItem("userInfoMsg")})},function(err){tip("退出失败")})},function(err){tip("退出失败")}):tip(data.returnMsg)}).error(function(error){tip("退出失败！")})})})},hfExitLogin:function(callback){$ionicPlatform.ready(function(){req.deviceInfo().then(function(deviceInfo){$http.post(reqRoot,{id:req.id(),MethodCode:req.MethodCode("AUM008"),signInfo:req.signInfo({sessionId:deviceInfo.sessionId},deviceInfo.signKey),time:req.time(),imei:deviceInfo.imei,APPID:deviceInfo.APPID,APPVER:deviceInfo.APPVER,MVER:req.MVER(),MTYPE:req.MTYPE(),PMODEL:deviceInfo.PMODEL,PBRAND:deviceInfo.PBRAND,chid:deviceInfo.chid,body:{sessionId:deviceInfo.sessionId}}).success(function(data){"0"==data.returnCode&&$cordovaSQLite.execute(db,'update loginInfo set sessionId = "", signKey = "", gesturePwd = "", gesturePwdTime = ""').then(function(res){$rootScope.logined=0,$cordovaSQLite.execute(db,"update userInfo set ciNo = ?,ciNm = ?,ciType = ?,idType = ?,idNo = ?,petNm = ?,auhStsBit = ?,busLmt = ?,photo = ?,mbPhn = ?,email = ?,prsCd = ?,rcmCd = ?,ciRelNm = ?,isSetTradePwd = ?,isApplyCert = ?,isSignCertAuth = ?,isNrd = ?,canToNrd = ?",["","","","","","","","","","","","","","","","","","",""]).then(function(res){callback&&callback()},function(err){})},function(err){})}).error(function(error){})})})},userInfo:{get:function(callBack){$ionicPlatform.ready(function(){var userInfo={ciNo:"",ciNm:"",ciType:"",idType:"",idNo:"",petNm:"",auhStsBit:"",busLmt:"",photo:"",mbPhn:"",email:"",prsCd:"",rcmCd:"",ciRelNm:"",isSetTradePwd:"",isApplyCert:"",isSignCertAuth:"",isNrd:"",canToNrd:""};$cordovaSQLite.execute(db,"SELECT * FROM userInfo").then(function(res){userInfo.ciNo=res.rows.length>0?res.rows.item(0).ciNo:"",userInfo.ciNm=res.rows.length>0?res.rows.item(0).ciNm:"",userInfo.ciType=res.rows.length>0?res.rows.item(0).ciType:"",userInfo.idType=res.rows.length>0?res.rows.item(0).idType:"",userInfo.idNo=res.rows.length>0?res.rows.item(0).idNo:"",userInfo.petNm=res.rows.length>0?res.rows.item(0).petNm:"",userInfo.auhStsBit=res.rows.length>0?res.rows.item(0).auhStsBit:"",userInfo.busLmt=res.rows.length>0?res.rows.item(0).busLmt:"",userInfo.photo=res.rows.length>0?res.rows.item(0).photo:"",userInfo.mbPhn=res.rows.length>0?res.rows.item(0).mbPhn:"",userInfo.email=res.rows.length>0?res.rows.item(0).email:"",userInfo.prsCd=res.rows.length>0?res.rows.item(0).prsCd:"",userInfo.rcmCd=res.rows.length>0?res.rows.item(0).rcmCd:"",userInfo.ciRelNm=res.rows.length>0?res.rows.item(0).ciRelNm:"",userInfo.isSetTradePwd=res.rows.length>0?res.rows.item(0).isSetTradePwd:"",userInfo.isApplyCert=res.rows.length>0?res.rows.item(0).isApplyCert:"",userInfo.isSignCertAuth=res.rows.length>0?res.rows.item(0).isSignCertAuth:"",userInfo.isNrd=res.rows.length>0?res.rows.item(0).isNrd:"",userInfo.canToNrd=res.rows.length>0?res.rows.item(0).canToNrd:"",callBack&&callBack(userInfo)},function(err){tip("获取用户信息")})})},set:function(data,callBack){$ionicPlatform.ready(function(){var ciNo=data.ciNo,ciNm=data.ciNm,ciType=data.ciType,idType=data.idType,idNo=data.idNo,petNm=data.petNm,auhStsBit=data.auhStsBit,busLmt=data.busLmt,photo=data.photo,mbPhn=data.mbPhn,email=data.email,prsCd=data.prsCd,rcmCd=data.rcmCd,ciRelNm=data.ciRelNm,isSetTradePwd=data.isSetTradePwd,isApplyCert=data.isApplyCert,isSignCertAuth=data.isSignCertAuth,isNrd=data.isNrd,canToNrd=data.canToNrd;$cordovaSQLite.execute(db,"update userInfo set ciNo = ?, ciNm = ?,ciType = ?,idType = ?,idNo = ?,petNm = ?,auhStsBit = ?,busLmt = ?,photo = ?,mbPhn = ?,email = ?,prsCd = ?,rcmCd = ?,ciRelNm = ?,isSetTradePwd = ?,isApplyCert = ?,isSignCertAuth = ?,isNrd = ?,canToNrd = ?",[ciNo,ciNm,ciType,idType,idNo,petNm,auhStsBit,busLmt,photo,mbPhn,email,prsCd,rcmCd,ciRelNm,isSetTradePwd,isApplyCert,isSignCertAuth,isNrd,canToNrd]).then(function(res){callBack&&callBack()},function(err){$ionicPopup.alert({title:"用户数据录入",template:err,okText:"确定"})})})}},clear:function(){$ionicPlatform.ready(function(){$cordovaSQLite.execute(db,"drop table loginInfo"),$cordovaSQLite.execute(db,"drop table userInfo")})}}}).factory("projectDetail",function(){var projectDetailList=[];return{all:function(){return projectDetailList},add:function(append){return projectDetailList=projectDetailList.concat(append)},init:function(){return projectDetailList=[],this}}}).factory("RecordQuery",function(){var RecordQueryObj={doQuery:!1,query:{sessionId:"",type:"0",paySts:null,timeStart:null,timeEnd:null,rmk:null,pageNo:"1",pageSize:"10"}};return{get:function(){return RecordQueryObj},set:function(obj){return angular.extend(RecordQueryObj,obj),RecordQueryObj},pagePlus:function(){return RecordQueryObj.query.pageNo=parseInt(RecordQueryObj.query.pageNo)+1+"",RecordQueryObj},init:function(){return RecordQueryObj={doQuery:!1,query:{sessionId:"",type:"0",paySts:null,timeStart:null,timeEnd:null,rmk:null,pageNo:"1",pageSize:"10"}},this}}}).factory("memberCenter",function(){return{get:function(){}}}).factory("capitalQuery",function(){return{query:{},clear:function(){this.query={timeStart:new Date((new Date).setYear((new Date).getFullYear()-1)),timeEnd:new Date}}}}).factory("resetTradePwdInfo",function(){return{info:{mbPhn:"",ciNm:"",smsCode:"",ciKey:"",id:"",ciNo:""},clear:function(){this.info={}}}}).factory("investFactory",function(){var bidInfo={lnNm:"",period:0,unit:"",rate:0,investM:0,income:0,isGoRegularPlan:!1,extraRate:0};return{setInfo:function(info){bidInfo.lnNm=info.lnNm,bidInfo.period=info.period,bidInfo.unit=info.unit,bidInfo.rate=info.rate,bidInfo.investM=info.investM,bidInfo.income=info.income,bidInfo.isGoRegularPlan=info.isGoRegularPlan,bidInfo.extraRate=info.extraRate},getInfo:function(){return bidInfo}}}).factory("withdrawFactory",function(){var withdrawInfo={withdrawalamount:"0",feeamt:"0",acsts:"",acno:"",prvcd:"",ctycd:"",bchno:"",bchnm:"",isFree:"0",payIntegral:"0",routeCode:"1",branchInfo:""};return{setInfo:function(info){withdrawInfo.withdrawalamount=info.withdrawalamount,withdrawInfo.feeamt=info.feeamt,withdrawInfo.acsts=info.acsts,withdrawInfo.acno=info.acno,withdrawInfo.prvcd=info.prvcd,withdrawInfo.ctycd=info.ctycd,withdrawInfo.bchno=info.bchno,withdrawInfo.bchnm=info.bchnm,withdrawInfo.isFree=info.isFree,withdrawInfo.payIntegral=info.payIntegral,withdrawInfo.routeCode=info.routeCode,withdrawInfo.branchInfo=info.branchInfo},getInfo:function(){return withdrawInfo}}}).factory("feeFactory",function(){var feeInfo={feeamt:0};return{set:function(fee){feeInfo.feeamt=fee.fee},get:function(){return feeInfo}}}).factory("msgCode",function(){return{isCount:!1}}).factory("reCharge",function($ionicPopup,$timeout,$http,reqRoot,req,state){var limits=[{name:"工商银行",oneLimit:"50000",dayLimit:"50000"},{name:"农业银行",oneLimit:"50000",dayLimit:"100000"},{name:"中国银行",oneLimit:"50000",dayLimit:"100000"},{name:"中国建设银行",oneLimit:"50000",dayLimit:"100000"},{name:"建设银行",oneLimit:"50000",dayLimit:"100000"},{name:"邮政储蓄银行",oneLimit:"50000",dayLimit:"200000"},{name:"平安银行",oneLimit:"50000",dayLimit:"200000"},{name:"民生银行",oneLimit:"50000",dayLimit:"200000"},{name:"光大银行",oneLimit:"50000",dayLimit:"200000"},{name:"广发银行",oneLimit:"50000",dayLimit:"200000"},{name:"广东发展银行",oneLimit:"500000",dayLimit:"1000000"},{name:"中信银行",oneLimit:"50000",dayLimit:"200000"},{name:"兴业银行",oneLimit:"50000",dayLimit:"50000"},{name:"华夏银行",oneLimit:"50000",dayLimit:"200000"},{name:"招商银行",oneLimit:"50000",dayLimit:"200000"},{name:"浦发银行",oneLimit:"49999",dayLimit:"49999"},{name:"交通银行",oneLimit:"50000",dayLimit:"100000"},{name:"上海银行",oneLimit:"5000",dayLimit:"5000"}],limitKq=[{name:"工商银行",oneLimit:"50000",dayLimit:"50000"},{name:"农业银行",oneLimit:"200000",dayLimit:"500000"},{name:"招商银行",oneLimit:"50000",dayLimit:"30000000"},{name:"建设银行",oneLimit:"300000",dayLimit:"500000"},{name:"中国银行",oneLimit:"50000",dayLimit:"100000"},{name:"交通银行",oneLimit:"50000",dayLimit:"70000"},{name:"浦发银行",oneLimit:"300000",dayLimit:"300000"},{name:"广发银行",oneLimit:"500000",dayLimit:"50000000"},{name:"广东发展银行",oneLimit:"500000",dayLimit:"50000000"},{name:"民生银行",oneLimit:"5000",dayLimit:"5000"},{name:"平安银行",oneLimit:"500000",dayLimit:"50000000"},{name:"光大银行",oneLimit:"100000",dayLimit:"50000000"},{name:"兴业银行",oneLimit:"50000",dayLimit:"50000000"},{name:"中信银行",oneLimit:"500000",dayLimit:"50000000"},{name:"华夏银行",oneLimit:"500000",dayLimit:"50000000"},{name:"邮政储蓄银行",oneLimit:"50000",dayLimit:"50000"},{name:"邮储银行",oneLimit:"50000",dayLimit:"50000"}],limitsll=[{name:"农业银行",oneLimit:"200000",dayLimit:"200000"},{name:"交通银行",oneLimit:"200000",dayLimit:"200000"},{name:"工商银行",oneLimit:"50000",dayLimit:"50000"},{name:"邮政储蓄银行",oneLimit:"5000",dayLimit:"5000"},{name:"浦发银行",oneLimit:"50000",dayLimit:"500000"},{name:"广发银行",oneLimit:"500000",dayLimit:"1000000"},{name:"广东发展银行",oneLimit:"500000",dayLimit:"1000000"},{name:"平安银行",oneLimit:"500000",dayLimit:"1000000"},{name:"招商银行",oneLimit:"50000",dayLimit:"50000"},{name:"民生银行",oneLimit:"500000",dayLimit:"500000"},{name:"中国银行",oneLimit:"50000",dayLimit:"500000"},{name:"建设银行",oneLimit:"50000",dayLimit:"200000"},{name:"中国建设银行",oneLimit:"50000",dayLimit:"200000"},{name:"光大银行",oneLimit:"500000",dayLimit:"1000000"},{name:"兴业银行",oneLimit:"50000",dayLimit:"50000"},{name:"中信银行",oneLimit:"500000",dayLimit:"1000000"},{name:"华夏银行",oneLimit:"500000",dayLimit:"1000000"},{name:"杭州银行",oneLimit:"50000",dayLimit:"1000000"},{name:"北京银行",oneLimit:"50000",dayLimit:"1000000"},{name:"浙商银行",oneLimit:"5000",dayLimit:"5000"},{name:"上海银行",oneLimit:"5000",dayLimit:"5000"},{name:"广州银行",oneLimit:"500000",dayLimit:"1000000"},{name:"太仓农村商业银行",oneLimit:"50000",dayLimit:"50000"},{name:"东莞农商",oneLimit:"500000",dayLimit:"1000000"},{name:"广东农信",oneLimit:"500000",dayLimit:"1000000"},{name:"广州农商",oneLimit:"500000",dayLimit:"1000000"},{name:"深圳农村商业银行",oneLimit:"50000",dayLimit:"1000000"},{name:"宁波银行",oneLimit:"500000",dayLimit:"500000"},{name:"山东农信社",oneLimit:"500000",dayLimit:"1000000"},{name:"江南农村商业银行",oneLimit:"100000",dayLimit:"100000"},{name:"吉林省农信社",oneLimit:"200000",dayLimit:"1000000"},{name:"甘肃农信社",oneLimit:"50000",dayLimit:"1000000"},{name:"江苏银行",oneLimit:"50000",dayLimit:"1000000"},{name:"长江商业银行",oneLimit:"500000",dayLimit:"1000000"},{name:"黑龙江农信社",oneLimit:"500000",dayLimit:"1000000"},{name:"恒丰银行",oneLimit:"500000",dayLimit:"1000000"},{name:"广东南粤",oneLimit:"50000",dayLimit:"1000000"},{name:"东莞银行",oneLimit:"50000",dayLimit:"1000000"},{name:"武汉农商行",oneLimit:"500000",dayLimit:"1000000"}],limitsZjcg=[{name:"工商银行",oneLimit:"10万",dayLimit:"10万"},{name:"农业银行",oneLimit:"10万",dayLimit:"10万"},{name:"建设银行",oneLimit:"10万",dayLimit:"10万"},{name:"兴业银行",oneLimit:"5万",dayLimit:"10万"},{name:"光大银行",oneLimit:"10万",dayLimit:"10万"},{name:"中信银行",oneLimit:"1000",dayLimit:"1000"},{name:"平安银行",oneLimit:"10万",dayLimit:"10万"},{name:"民生银行",oneLimit:"10万",dayLimit:"10万"},{name:"广发银行",oneLimit:"10万",dayLimit:"10万"},{name:"广东发展银行",oneLimit:"10万",dayLimit:"10万"},{name:"浦发银行",oneLimit:"2万",dayLimit:"10万"},{name:"交通银行",oneLimit:"5万",dayLimit:"10万"}];return{limits:function(){return limits},limitKq:function(){return limitKq},limitsll:function(){return limitsll},limitsZjcg:function(){return limitsZjcg},alertPopup:function(title){return function(title){var alertPopup=$ionicPopup.alert({title:title,template:"<style>.popup-head{border-bottom: 0px solid #eee;}.popup-body{padding:0}</style>",buttons:[]});$timeout(function(){alertPopup.close()},3e3)}(title)},confirmPopup:function(){$ionicPopup.confirm({title:"请添加银行卡",template:"添加银行卡才能使用快捷支付哦！",buttons:[{text:"取消"},{text:"<b>去绑定</b>",type:"button-positive",onTap:function(e){state.go("doing")}}]}).then(function(res){res?console.log("确定"):console.log("取消")})}}}).factory("planDetailFactory",function(){var planDetailInfo={ivsAmt:"",rate:"",joinDate:"",exitDate:"",remainAmt:"",waitBackAmt:"",expireAmt:""};return{setInfo:function(info){planDetailInfo.ivsAmt=info.ivsAmt,planDetailInfo.rate=info.rate,planDetailInfo.joinDate=info.joinDate,planDetailInfo.exitDate=info.exitDate,planDetailInfo.remainAmt=info.remainAmt,planDetailInfo.waitBackAmt=info.waitBackAmt,planDetailInfo.expireAmt=info.expireAmt},getInfo:function(){return planDetailInfo}}}).factory("withdrawFeeFactory",function($rootScope,$http,$ionicPopup,req,reqRoot,state,tip){var feeInfo={feeType:0,deductionType:"",fee:0,isInit:!0};return{setInfo:function(info){feeInfo.feeType=info.feeType,feeInfo.deductionType=info.deductionType,feeInfo.fee=info.fee,feeInfo.isInit=info.isInit},getInfo:function(){return feeInfo}}}).factory("balance",function($rootScope,$http,$ionicPopup,req,reqRoot,state,tip){var doBalancevalue=function(){$rootScope.isHasValue=!0;var callback;$rootScope.isHasValue=!0,callback=function(useInfo){useInfo.availBal<1&&($rootScope.isHasValue=!1)},req.deviceInfo().then(function(deviceInfo){req.signInfo({sessionId:deviceInfo.sessionId},deviceInfo.signKey),$http.post(reqRoot,{id:req.id(),MethodCode:req.MethodCode("UM071"),time:req.time(),signInfo:req.signInfo({sessionId:deviceInfo.sessionId},deviceInfo.signKey),imei:deviceInfo.imei,APPID:deviceInfo.APPID,APPVER:deviceInfo.APPVER,MVER:req.MVER(),MTYPE:req.MTYPE(),PMODEL:deviceInfo.PMODEL,PBRAND:deviceInfo.PBRAND,chid:deviceInfo.chid,body:{sessionId:deviceInfo.sessionId}}).success(function(data){"1"==data.returnCode&&callback(data.body[0])}).error(function(error){tip("网络忙，请稍后再试……")})})};return{doBalancevalue:function(){return doBalancevalue()}}}).factory("kqBankData",function(){var kqInfo={bankName:"",bankNoAfter:"",bankNo:"",oneLimit:"",dayLimit:""};return{setInfo:function(info){kqInfo.bankName=info.bankName,kqInfo.bankNoAfter=info.bankNoAfter,kqInfo.bankNo=info.bankNo,kqInfo.oneLimit=info.oneLimit,kqInfo.dayLimit=info.dayLimit},getInfo:function(){return kqInfo}}}).factory("zcInfo",function($http,$rootScope,req,reqRoot,tip,_responseData){return function(callback){req.deviceInfo().then(function(deviceInfo){$http.post(reqRoot,{id:req.id(),MethodCode:req.MethodCode("Z011"),signInfo:req.signInfo({sessionId:deviceInfo.sessionId},deviceInfo.signKey),time:req.time(),imei:deviceInfo.imei,APPID:deviceInfo.APPID,APPVER:deviceInfo.APPVER,MVER:req.MVER(),MTYPE:req.MTYPE(),PMODEL:deviceInfo.PMODEL,PBRAND:deviceInfo.PBRAND,chid:deviceInfo.chid,body:{sessionId:deviceInfo.sessionId}}).success(function(data){_responseData(data,function(){callback(data)})}).error(function(error){tip("网络忙，请稍后再试……")})})}}).factory("chooseCity",function(){var cityInfo={zoneCityId:"",zoneCity:""};return{setInfo:function(info){cityInfo.zoneCityId=info.zoneCityId,cityInfo.zoneCity=info.zoneCity},getInfo:function(){return cityInfo}}}).factory("httpService",function($http,$q,$rootScope,req,reqRoot,tip){return function(code,param,isHasLoadingFn,isHasLoadingHideFn){var deferred=$q.defer();return req.deviceInfo().then(function(deviceInfo){isHasLoadingFn&&isHasLoadingFn(),$http.post(reqRoot,{id:req.id(),MethodCode:req.MethodCode(code),signInfo:req.signInfo(param,deviceInfo.signKey),time:req.time(),imei:deviceInfo.imei,APPID:deviceInfo.APPID,APPVER:deviceInfo.APPVER,MVER:req.MVER(),MTYPE:req.MTYPE(),PMODEL:deviceInfo.PMODEL,PBRAND:deviceInfo.PBRAND,chid:deviceInfo.chid,body:param}).success(function(data){isHasLoadingHideFn&&isHasLoadingHideFn(),deferred.resolve(data)}).error(function(error){isHasLoadingHideFn&&isHasLoadingHideFn(),tip("网络忙，请稍后再试……")})}),deferred.promise}}).factory("registerShare",function(req,httpService,_responseData){return function(callback){req.deviceInfo().then(function(deviceInfo){httpService("S001",{sessionId:deviceInfo.sessionId,type:"2"}).then(function(data){_responseData(data,function(){callback(data)})})})}}).directive("fileModel",["$parse",function($parse){return{restrict:"A",link:function(scope,element,attrs,ngModel){var modelSetter=$parse(attrs.fileModel).assign;element.bind("change",function(event){scope.$apply(function(){modelSetter(scope,element[0].files[0])}),scope.file=(event.srcElement||event.target).files[0],scope.getFile()})}}}]),angular.module("starter.router",[]).config(function($stateProvider,$urlRouterProvider){$stateProvider.state("tab",{url:"/tab",abstract:!0,templateUrl:"templates/tabs.html",controller:"TabCtrl"}).state("tab.investIndex",{cache:!1,url:"/investIndex",views:{"tab-investIndex":{templateUrl:"templates/tab-investIndex.html",controller:"InvestIndexCtrl"}}}).state("tab.bidList",{cache:!1,url:"/bidList/:bidId/:querytype/:isPreview",prefetchTemplate:!1,views:{"tab-investIndex":{templateUrl:"templates/bidList.html",controller:"BidListCtrl"}}}).state("tab.bidListNewFish",{cache:!1,prefetchTemplate:!1,url:"/bidListNewFish/:bidId",views:{"tab-investIndex":{templateUrl:"templates/bidListNewFish.html",controller:"BidListNewFishCtrl"}}}).state("tab.bidListCly",{cache:!1,prefetchTemplate:!1,url:"/bidListCly/:bidId/:querytype",views:{"tab-investIndex":{templateUrl:"templates/bidListCly.html",controller:"BidListClyCtrl"}}}).state("tab.bidHistory",{cache:!1,prefetchTemplate:!1,url:"/bidHistory/:bidId/:querytype",views:{"tab-investIndex":{templateUrl:"templates/bidHistory.html",controller:"BidHistoryCtrl"}}}).state("tab.bidDetail",{cache:!1,prefetchTemplate:!1,url:"/bidDetail/:lnNo/:bidId",params:{NOVICETENDERAMT:"",NOVICETENDERTIMES:""},views:{"tab-investIndex":{templateUrl:"templates/bidDetail.html",controller:"BidDetailCtrl"}}}).state("tab.projectDetail",{cache:!1,prefetchTemplate:!1,url:"/projectDetail/:lnNo/:bidId/:prdType/:srcLnNo",views:{"tab-investIndex":{templateUrl:"templates/projectDetail.html",controller:"ProjectDetailCtrl"}}}).state("tab.projectDetailCpxq",{cache:!1,prefetchTemplate:!1,url:"/projectDetailCpxq/:lnNo/:bidId/:prdType/:srcLnNo",views:{"tab-investIndex":{templateUrl:"templates/projectDetailCpxq.html",controller:"ProjectDetailCtrl"}}}).state("tab.projectDetailDbjg",{cache:!1,prefetchTemplate:!1,url:"/projectDetailDbjg/:lnNo/:bidId/:prdType/:srcLnNo",views:{"tab-investIndex":{templateUrl:"templates/projectDetailDbjg.html",controller:"ProjectDetailCtrl"}}}).state("tab.projectDetailFkcs",{cache:!1,prefetchTemplate:!1,url:"/projectDetailFkcs/:lnNo/:bidId/:prdType/:srcLnNo",views:{"tab-investIndex":{templateUrl:"templates/projectDetailFkcs.html",controller:"ProjectDetailCtrl"}}}).state("tab.projectResource",{cache:!1,prefetchTemplate:!1,url:"/projectResource/:lnNo",views:{"tab-investIndex":{templateUrl:"templates/projectResource.html",controller:"ProjectResourceCtrl"}}}).state("tab.investRecord",{cache:!1,prefetchTemplate:!1,url:"/investRecord/:lnNo/:bidId",views:{"tab-investIndex":{templateUrl:"templates/investRecord.html",controller:"InvestRecordCtrl"}}}).state("investTickets",{cache:!1,prefetchTemplate:!1,url:"/investTickets/:type/:isInvest/:lnno",templateUrl:"templates/investTickets.html",controller:"InvestTicketsCtrl"}).state("tab.investProtocol",{cache:!1,prefetchTemplate:!1,url:"/investProtocol/:lnno/:lnamt",views:{"tab-investIndex":{templateUrl:"templates/investProtocol.html",controller:"InvestProtocolCtrl"}}}).state("tab.investJjsProtocol",{cache:!1,prefetchTemplate:!1,url:"/investJjsProtocol/:lnno/:lnamt/:bidAmtDF",views:{"tab-investIndex":{templateUrl:"templates/investJjsProtocol.html",controller:"InvestJjsProtocolCtrl"}}}).state("tab.invest",{prefetchTemplate:!1,url:"/invest/:lnno/:lnamt/:isNew/:rate/:bidId",views:{"tab-investIndex":{templateUrl:"templates/invest.html",controller:"InvestCtrl"}}}).state("tab.investSyd",{prefetchTemplate:!1,url:"/investSyd/:lnno/:lnamt/:isNew/:rate/:bidId/:lnTerm",views:{"tab-investIndex":{templateUrl:"templates/investSyd.html",controller:"InvestCtrl"}}}).state("tab.investSuccess",{cache:!1,prefetchTemplate:!1,url:"/investSuccess/:msg",views:{"tab-investIndex":{templateUrl:"templates/investSuccess.html",controller:"InvestSuccessCtrl"}}}).state("tab.banksInfo",{cache:!1,prefetchTemplate:!1,url:"/banksInfo",views:{"tab-memberCenter":{templateUrl:"templates/banksInfo.html",controller:"BanksInfoCtrl"}}}).state("tab.assetStatistics",{cache:!1,prefetchTemplate:!1,url:"/assetStatistics",views:{"tab-memberCenter":{templateUrl:"templates/assetStatistics.html",controller:"AssetStatisticsCtrl"}}}).state("tab.myInvest",{cache:!1,prefetchTemplate:!1,url:"/myInvest",views:{"tab-memberCenter":{templateUrl:"templates/myInvest.html",controller:"MyInvestCtrl"}}}).state("tab.myInvestNew",{cache:!1,prefetchTemplate:!1,url:"/myInvestNew/:tabIndex/:queryType/:planStatus",views:{"tab-memberCenter":{templateUrl:"templates/myInvestNew.html",controller:"MyInvestNewCtrl"}}}).state("tab.investDetail",{cache:!1,url:"/investDetail/:lnNo/:txNo/:prdTyp/:type/:index",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/investDetail.html",controller:"InvestDetailCtrl"}}}).state("tab.capitalM",{cache:!1,prefetchTemplate:!1,url:"/capitalM",views:{"tab-memberCenter":{templateUrl:"templates/capitalM.html",controller:"capitalMCtrl"}}}).state("tab.capitalFlow",{cache:!1,prefetchTemplate:!1,url:"/capitalFlow",views:{"tab-memberCenter":{templateUrl:"templates/capitalFlow.html",controller:"CapitalFlowCtrl"}}}).state("capitalFlowQuery",{cache:!1,prefetchTemplate:!1,url:"/capitalFlowQuery",templateUrl:"templates/capitalFlowQuery.html",controller:"CapitalFlowQueryCtrl"}).state("record",{url:"/record",prefetchTemplate:!1,templateUrl:"templates/record.html",controller:"RecordCtrl"}).state("recordQuery",{cache:!1,url:"/recordQuery",prefetchTemplate:!1,templateUrl:"templates/recordQuery.html",controller:"RecordQueryCtrl"}).state("recordInfo",{cache:!1,prefetchTemplate:!1,url:"/recordInfo/:index",templateUrl:"templates/recordInfo.html",controller:"RecordInfoCtrl"}).state("tab.safeAuthen",{cache:!1,prefetchTemplate:!1,url:"/safeAuthen",views:{"tab-memberCenter":{templateUrl:"templates/safeAuthen.html",controller:"safeAuthenCtrl"}}}).state("tab.realName",{url:"/realName",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/realName.html",controller:"realNameCtrl"}}}).state("tab.realNameInfo",{url:"/realNameInfo",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/realNameInfo.html",controller:"RealNameInfoCtrl"}}}).state("tab.updatePhn",{cache:!1,url:"/updatePhn",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/updatePhn.html",controller:"updatePhnCtrl"}}}).state("tab.updatePhnStep2",{cache:!1,prefetchTemplate:!1,url:"/updatePhnStep2",views:{"tab-memberCenter":{templateUrl:"templates/updatePhnStep2.html",controller:"updatePhnStep2Ctrl"}}}).state("tab.updateTradePwd",{cache:!1,prefetchTemplate:!1,url:"/updateTradePwd",views:{"tab-memberCenter":{templateUrl:"templates/updateTradePwd.html",controller:"UpdateTradePwdCtrl"}}}).state("tab.scoreM",{cache:!1,prefetchTemplate:!1,url:"/scoreM",views:{"tab-memberCenter":{templateUrl:"templates/scoreM.html",controller:"scoreMCtrl"}}}).state("tab.scoreLevel",{cache:!1,prefetchTemplate:!1,url:"/scoreLevel",views:{"tab-memberCenter":{templateUrl:"templates/scoreLevel.html",controller:"scoreLevelCtrl"}}}).state("tab.scoreDetail",{cache:!1,prefetchTemplate:!1,url:"/scoreDetail/:type/:titleName",views:{"tab-memberCenter":{templateUrl:"templates/scoreDetail.html",controller:"scoreDetailCtrl"}}}).state("tab.scoreExchange",{cache:!1,prefetchTemplate:!1,url:"/scoreExchange",views:{"tab-memberCenter":{templateUrl:"templates/scoreExchange.html",controller:"scoreExchangeCtrl"}}}).state("recharge",{url:"/recharge",prefetchTemplate:!1,templateUrl:"templates/recharge.html",controller:"RechargeCtrl"}).state("largePayment",{url:"/largePayment",prefetchTemplate:!1,templateUrl:"templates/largePayment.html",controller:"LargePaymentCtrl"}).state("quickMoneyPayment",{cache:!1,prefetchTemplate:!1,url:"/quickMoneyPayment/:select",templateUrl:"templates/quickMoneyPayment.html",controller:"QuickMoneyPaymentCtrl"}).state("tab.quickMoneySelectBank",{cache:!1,prefetchTemplate:!1,url:"/quickMoneySelectBank",views:{"tab-memberCenter":{templateUrl:"templates/quickMoneySelectBank.html",controller:"QuickMoneySelectBankCtrl"}}}).state("tab.addKqBanks",{cache:!1,prefetchTemplate:!1,url:"/addKqBanks",views:{"tab-memberCenter":{templateUrl:"templates/addKqBanks.html",controller:"AddKqBanksCtrl"}}}).state("quickPayment",{prefetchTemplate:!1,url:"/quickPayment",templateUrl:"templates/quickPayment.html",controller:"QuickPaymentCtrl"}).state("wechatPayment",{url:"/wechatPayment",prefetchTemplate:!1,templateUrl:"templates/wechatPayment.html",controller:"WechatPaymentCtrl"}).state("rechargeSuccess",{url:"/rechargeSuccess",prefetchTemplate:!1,params:{reqData:null},templateUrl:"templates/rechargeSuccess.html"}).state("withdraw",{url:"/withdraw",params:{money:0},prefetchTemplate:!1,templateUrl:"templates/withdraw.html",controller:"WithdrawCtrl"}).state("withdrawFee",{cache:!1,url:"/withdrawFee",prefetchTemplate:!1,templateUrl:"templates/withdrawFee.html",controller:"WithdrawFeeCtrl"}).state("withdrawSuccess",{cache:!1,prefetchTemplate:!1,url:"/withdrawSuccess",templateUrl:"templates/withdrawSuccess.html",controller:"WithdrawCtrl"}).state("login",{cache:!1,prefetchTemplate:!1,url:"/login",templateUrl:"templates/login.html",controller:"LoginCtrl"}).state("gesturePwd",{cache:!1,prefetchTemplate:!1,params:{mode:null},url:"/gesturePwd",templateUrl:"templates/gesturePwd.html",controller:"GesturePwdCtrl"}).state("contract",{cache:!1,prefetchTemplate:!1,params:{url:""},url:"/contract",templateUrl:"templates/contract.html",controller:"ContractCtrl"}).state("banner",{cache:!1,params:{url:"",title:""},url:"/banner",templateUrl:"templates/banner.html",controller:"BannerCtrl"}).state("more",{cache:!1,prefetchTemplate:!1,url:"/more",templateUrl:"templates/tab-more.html",controller:"MoreCtl"}).state("about",{cache:!1,url:"/about",prefetchTemplate:!1,templateUrl:"templates/about.html",controller:"AboutCtrl"}).state("doing",{url:"/doing",templateUrl:"templates/doing.html"}).state("tab.myInvestM",{url:"/myInvestM",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/myInvestM.html"}}}).state("tab.regularPlan",{cache:!1,prefetchTemplate:!1,url:"/regularPlan",views:{"tab-memberCenter":{templateUrl:"templates/regularPlan.html",controller:"RegularPlanCtrl"}}}).state("institutionDetail",{url:"/institutionDetail/:lnno/:orgno",prefetchTemplate:!1,templateUrl:"templates/institutionDetail.html",controller:"InstitutionDetailCtrl"}).state("tab.bidWlyDetail",{cache:!1,prefetchTemplate:!1,url:"/bidWlyDetail/:lnNo/:bidId",views:{"tab-investIndex":{templateUrl:"templates/bidWlyDetail.html",controller:"BidWlyDetailCtrl"}}}).state("tab.bidClyDetail",{cache:!1,prefetchTemplate:!1,url:"/bidClyDetail/:lnNo/:bidId",views:{"tab-investIndex":{templateUrl:"templates/bidClyDetail.html",controller:"BidWlyDetailCtrl"}}}).state("tab.projectWlyDetail",{cache:!1,prefetchTemplate:!1,url:"/projectWlyDetail/:lnNo/:bidId",views:{"tab-investIndex":{templateUrl:"templates/projectWlyDetail.html",controller:"ProjectWlyDetailCtrl"}}}).state("tab.projectWlyDetailCpxq",{cache:!1,prefetchTemplate:!1,url:"/projectWlyDetailCpxq/:lnNo/:bidId/:isCpxq",views:{"tab-investIndex":{templateUrl:"templates/projectWlyDetailCpxq.html",controller:"ProjectWlyDetailCtrl"}}}).state("tab.projectWlyDetailYtxm",{cache:!1,prefetchTemplate:!1,url:"/projectWlyDetailYtxm/:lnNo/:bidId",views:{"tab-investIndex":{templateUrl:"templates/projectWlyDetailYtxm.html",controller:"ProjectWlyDetailCtrl"}}}).state("tab.planDetail",{cache:!1,url:"/planDetail/:lnNo/:txNo",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/planDetail.html",controller:"PlanDetailCtrl"}}}).state("tab.investWly",{url:"/investWly/:lnno/:lnamt/:isNew/:bidId",prefetchTemplate:!1,views:{"tab-investIndex":{templateUrl:"templates/investWly.html",controller:"InvestWlyCtrl"}}}).state("tab.investWlyProtocol",{cache:!1,prefetchTemplate:!1,url:"/investWlyProtocol/:lnno/:lnamt/:bidId",views:{"tab-investIndex":{templateUrl:"templates/investWlyProtocol.html",controller:"InvestWlyProtocolCtrl"}}}).state("tab.investWlyRecord",{cache:!1,prefetchTemplate:!1,url:"/investWlyRecord/:lnNo/:bidId",views:{"tab-investIndex":{templateUrl:"templates/investWlyRecord.html",controller:"InvestWlyRecordCtrl"}}}).state("tab.bidHlyDetail",{cache:!1,prefetchTemplate:!1,url:"/bidHlyDetail/:lnNo/:bidId",views:{"tab-investIndex":{templateUrl:"templates/bidHlyDetail.html",controller:"BidHlyDetailCtrl"}}}).state("tab.projectHlyDetail",{cache:!1,prefetchTemplate:!1,url:"/projectHlyDetail/:lnNo",views:{"tab-investIndex":{templateUrl:"templates/projectHlyDetail.html",controller:"ProjectHlyDetailCtrl"}}}).state("tab.projectHlyDetailCpxq",{cache:!1,prefetchTemplate:!1,url:"/projectHlyDetailCpxq/:lnNo/:isCpxq",views:{"tab-investIndex":{templateUrl:"templates/projectHlyDetailCpxq.html",controller:"ProjectHlyDetailCtrl"}}}).state("tab.projectHlyDetailYtxm",{cache:!1,prefetchTemplate:!1,url:"/projectHlyDetailYtxm/:lnNo",views:{"tab-investIndex":{templateUrl:"templates/projectHlyDetailYtxm.html",controller:"ProjectHlyDetailCtrl"}}}).state("tab.investHly",{cache:!1,prefetchTemplate:!1,url:"/investHly/:lnNo/:rate",views:{"tab-investIndex":{templateUrl:"templates/investHly.html",controller:"InvestHlyCtrl"}}}).state("tab.investHlyRecord",{cache:!1,prefetchTemplate:!1,url:"/investHlyRecord/:lnNo",views:{"tab-investIndex":{templateUrl:"templates/investHlyRecord.html",controller:"InvestHlyRecordCtrl"}}}).state("tab.investHlyProtocol",{cache:!1,prefetchTemplate:!1,url:"/investHlyProtocol/:lnno/:lnamt",views:{"tab-investIndex":{templateUrl:"templates/investHlyProtocol.html",controller:"InvestHlyProtocolCtrl"}}}).state("tab.bidZzbDetail",{cache:!1,prefetchTemplate:!1,url:"/bidZzbDetail/:lnNo/:bidId",views:{"tab-investIndex":{templateUrl:"templates/bidZzbDetail.html",controller:"BidZzbDetailCtrl"}}}).state("tab.investZzb",{cache:!1,prefetchTemplate:!1,url:"/investZzb/:lnno/:lnamt/:isNew/:rate/:bidId",views:{"tab-investIndex":{templateUrl:"templates/investZzb.html",controller:"InvestZzbCtrl"}}}).state("tab.investZzbProtocol",{cache:!1,prefetchTemplate:!1,url:"/investZzbProtocol/:lnno/:lnamt",views:{"tab-investIndex":{templateUrl:"templates/investZzbProtocol.html",controller:"InvestZzbProtocolCtrl"}}}).state("tab.investYzzDetail",{cache:!1,prefetchTemplate:!1,url:"/investYzzDetail/:lnNo/:type",views:{"tab-memberCenter":{templateUrl:"templates/investYzzDetail.html",controller:"InvestYzzDetailCtrl"}}}).state("tab.calendar",{cache:!1,prefetchTemplate:!1,url:"/calendar",views:{"tab-memberCenter":{templateUrl:"templates/calendar.html",controller:"CalendarCtrl"}}}).state("tab.myTasks",{cache:!1,url:"/myTasks",prefetchTemplate:!1,views:{"tab-find":{templateUrl:"templates/myTasks.html",controller:"MyTasksCtrl"}}}).state("Announcement",{url:"/Announcement/:title/:id",templateUrl:"templates/Announcement.html",controller:"AnnouncementCtrl"}).state("hkNew",{url:"/hkNew",templateUrl:"templates/hkNew.html",controller:"hkNewCtrl"}).state("AnnouncementContent",{cache:!1,prefetchTemplate:!1,url:"/AnnouncementContent/:bidId/:bidName",templateUrl:"templates/AnnouncementContent.html",controller:"AnnouncementContentCtrl"}).state("platformData",{cache:!1,prefetchTemplate:!1,url:"/platformData",templateUrl:"templates/platformData.html",controller:"platformDataCtrl"}).state("registerNew",{cache:!1,prefetchTemplate:!1,url:"/registerNew",templateUrl:"templates/registerNew.html",controller:"RegisterNewCtrl"}).state("registerLoginStep12",{cache:!1,prefetchTemplate:!1,url:"/registerLoginStep12",params:{tel:"",msgCode:"",ciKey:""},templateUrl:"templates/registerLoginStep12.html",controller:"RegisterLoginStep12Ctrl"}).state("forgetLoginPassword1",{cache:!1,prefetchTemplate:!1,url:"/forgetLoginPassword1",templateUrl:"templates/forgetLoginPassword1.html",controller:"ForgetLoginPassword1Ctrl"}).state("forgetLoginPassword2",{cache:!1,prefetchTemplate:!1,url:"/forgetLoginPassword2/:tel/:ciNo/:flag",templateUrl:"templates/forgetLoginPassword2.html",controller:"ForgetLoginPassword2Ctrl"}).state("forgetLoginPassword3",{cache:!1,prefetchTemplate:!1,url:"/forgetLoginPassword3/:tel/:ciNo",templateUrl:"templates/forgetLoginPassword3.html",controller:"ForgetLoginPassword3Ctrl"}).state("forgetLoginPasswordSuccess",{cache:!1,prefetchTemplate:!1,url:"/forgetLoginPasswordSuccess",templateUrl:"templates/forgetLoginPasswordSuccess.html",controller:"ForgetLoginPasswordSuccessCtrl"}).state("tab.safety",{cache:!1,prefetchTemplate:!1,url:"/safety",views:{"tab-memberCenter":{templateUrl:"templates/safety.html"}}}).state("tab.safetyApplyCertificate",{cache:!1,prefetchTemplate:!1,url:"/safetyApplyCertificate",views:{"tab-memberCenter":{templateUrl:"templates/safety-applyCertificate.html",controller:"ApplyCertificateCtrl"}}}).state("tab.safetyGranted",{cache:!1,prefetchTemplate:!1,url:"/safetyGranted",views:{"tab-memberCenter":{templateUrl:"templates/safetyGranted.html",controller:"SafetyGrantedCtrl"}}}).state("tab.safetySuccess",{cache:!1,prefetchTemplate:!1,url:"/safetySuccess",views:{"tab-memberCenter":{templateUrl:"templates/safety-success.html",controller:"SafetySuccessCtrl"}}}).state("tab.addBanks",{cache:!1,prefetchTemplate:!1,url:"/addBanks",views:{"tab-memberCenter":{templateUrl:"templates/addBanks.html",controller:"AddBanksCtrl"}}}).state("tab.cardCertify",{cache:!1,prefetchTemplate:!1,url:"/cardCertify",params:{name:"",acno:""},views:{"tab-memberCenter":{templateUrl:"templates/cardCertify.html",controller:"CardCertifyCtrl"}}}).state("tab.cardCertifyHand",{cache:!1,prefetchTemplate:!1,url:"/cardCertifyHand",views:{"tab-memberCenter":{templateUrl:"templates/cardCertify-hand.html",controller:"CardCertifyHandCtrl"}}}).state("safetyContract",{cache:!1,prefetchTemplate:!1,url:"/safetyContract/:url",templateUrl:"templates/safetyContract.html",controller:"safetyContractCtrl"}).state("tab.investSydProtocol",{cache:!1,prefetchTemplate:!1,url:"/investSydProtocol/:lnno/:lnamt/:bidId/:lnTerm/:money",views:{"tab-investIndex":{templateUrl:"templates/investSydProtocol.html",controller:"InvestSydProtocolCtrl"}}}).state("tab.capitalSupervisionYet",{cache:!1,prefetchTemplate:!1,url:"/capitalSupervisionYet",views:{"tab-memberCenter":{templateUrl:"templates/capitalSupervisionYet.html",controller:"CapitalSupervisionYetCtrl"}}}).state("tab.capitalSupervision",{cache:!1,prefetchTemplate:!1,url:"/capitalSupervision",views:{"tab-memberCenter":{templateUrl:"templates/capitalSupervision.html",controller:"CapitalSupervisionCtrl"}}}).state("tab.capitalSuccess",{cache:!1,prefetchTemplate:!1,url:"/capitalSuccess",views:{"tab-memberCenter":{templateUrl:"templates/capitalSuccess.html",controller:"CapitalSuccessCtrl"}}}).state("tab.resetZcTradePwd",{cache:!1,prefetchTemplate:!1,url:"/resetZcTradePwd",views:{"tab-memberCenter":{templateUrl:"templates/resetZcTradePwd-valid.html",controller:"ResetZcTradePwdCtrl"}}}).state("rechargeBankTransfer",{url:"/rechargeBankTransfer",prefetchTemplate:!1,templateUrl:"templates/rechargeBankTransfer.html",controller:"CapitalSupervisionYetCtrl"}).state("withdrawList",{cache:!1,prefetchTemplate:!1,url:"/withdrawList",templateUrl:"templates/withdrawList.html"}).state("quickPaymentZc",{cache:!1,prefetchTemplate:!1,url:"/quickPaymentZc",templateUrl:"templates/quickPaymentZc.html",controller:"QuickPaymentZcCtrl"}).state("tab.banksInfoZc",{cache:!1,prefetchTemplate:!1,url:"/banksInfoZc",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/banksInfoZc.html",controller:"BanksInfoZcCtrl"}}}).state("tab.addBanksZc",{cache:!1,prefetchTemplate:!1,url:"/addBanksZc",views:{"tab-memberCenter":{templateUrl:"templates/addBanksZc.html",controller:"AddBanksZcCtrl"}}}).state("tab.updatePhnStep2Zc",{cache:!1,prefetchTemplate:!1,url:"/updatePhnStep2Zc",views:{"tab-memberCenter":{templateUrl:"templates/updatePhnStep2Zc.html",controller:"updatePhnStep2ZcCtrl"}}}).state("withdrawZc",{url:"/withdrawZc",prefetchTemplate:!1,params:{money:0},templateUrl:"templates/withdrawZc.html",controller:"WithdrawZcCtrl"}).state("chooseCity",{cache:!1,prefetchTemplate:!1,url:"/chooseCity",templateUrl:"templates/chooseCity.html",controller:"ChooseCityCtrl"}).state("messSubcription",{cache:!1,prefetchTemplate:!1,url:"/messSubcription",templateUrl:"templates/messSubcription.html",controller:"MessSubcriptionCtrl"}).state("tab.myBill",{cache:!1,prefetchTemplate:!1,url:"/myBill",views:{"tab-memberCenter":{templateUrl:"templates/myBill.html",controller:"myBillCtrl"}}}).state("tab.creditTransfer",{url:"/creditTransfer/:lnNo/:txNo",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/creditTransfer.html",controller:"creditTransferCtrl"}}}).state("tab.creditTransferSuc",{url:"/creditTransferSuc/:lnNo/",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/creditTransferSuc.html",controller:"creditTransferSucCtrl"}}}).state("tab.creditTransferRule",{url:"/creditTransferRule",prefetchTemplate:!1,views:{"tab-memberCenter":{templateUrl:"templates/creditTransferRule.html",controller:"creditTransferRuleCtrl"}}}).state("tab.bidService",{cache:!1,prefetchTemplate:!1,url:"/bidService",views:{"tab-memberCenter":{templateUrl:"templates/bidService.html",controller:"BidServiceCtrl"}}}).state("tab.compensatory",{url:"/compensatory",prefetchTemplate:!1,params:{cnFlNo:""},views:{"tab-memberCenter":{templateUrl:"templates/compensatory.html",controller:"CompensatoryCtrl"}}}).state("tab.revealDetails",{url:"/revealDetails",prefetchTemplate:!1,params:{doudi:""},views:{"tab-memberCenter":{templateUrl:"templates/revealDetails.html",controller:"RevealDetailsCtrl"}}}).state("myCounselor",{cache:!1,prefetchTemplate:!1,url:"/myCounselor",templateUrl:"templates/myCounselor.html",controller:"MyCounselorCtrl"}).state("tab.myRecommend",{cache:!1,prefetchTemplate:!1,url:"/myRecommend",views:{"tab-memberCenter":{templateUrl:"templates/myRecommend.html",controller:"MyRecommendCtrl"}}}).state("tab.myPackets",{cache:!1,prefetchTemplate:!1,url:"/myPackets",views:{"tab-memberCenter":{templateUrl:"templates/myPackets.html",controller:"MyPacketsCtrl"}}}).state("tab.myFriends",{cache:!1,prefetchTemplate:!1,url:"/myFriends",views:{"tab-memberCenter":{templateUrl:"templates/myFriends.html",controller:"MyFriendsCtrl"}}}).state("tab.awardRule",{cache:!1,prefetchTemplate:!1,url:"/awardRule",views:{"tab-memberCenter":{templateUrl:"templates/awardRule.html",controller:"AwardRuleCtrl"}}}).state("tab.recommendPerson",{cache:!1,prefetchTemplate:!1,url:"/recommendPerson",views:{"tab-memberCenter":{templateUrl:"templates/recommendPerson.html",controller:"RecommendPersonCtrl"}}}).state("inviteFriends",{cache:!1,prefetchTemplate:!1,url:"/inviteFriends",templateUrl:"templates/inviteFriends.html",controller:"InviteFriendsCtrl"}).state("xpIcp",{cache:!1,prefetchTemplate:!1,url:"/xpIcp",templateUrl:"templates/xpIcp.html",controller:"xpIcpCtrl"}).state("xpBankM",{cache:!1,prefetchTemplate:!1,url:"/xpBankM",templateUrl:"templates/xpBankM.html"}).state("xpSpelCon",{cache:!1,prefetchTemplate:!1,url:"/xpSpelCon",templateUrl:"templates/xpSpelCon.html"}).state("xpTel",{cache:!1,prefetchTemplate:!1,url:"/xpTel",templateUrl:"templates/xpTel.html"}).state("xpShareH",{cache:!1,prefetchTemplate:!1,url:"/xpShareH",templateUrl:"templates/xpShareH.html"}).state("xpCompanyPro",{cache:!1,prefetchTemplate:!1,url:"/xpCompanyPro",templateUrl:"templates/xpCompanyPro.html"}).state("xpCmpanyMsg",{cache:!1,prefetchTemplate:!1,url:"/xpCmpanyMsg",templateUrl:"templates/xpCmpanyMsg.html",controller:"xpCmpanyMsgCtrl"}).state("xpHonorCer",{cache:!1,prefetchTemplate:!1,url:"/xpHonorCer",templateUrl:"templates/xpHonorCer.html",controller:"xpHonorCerCtrl"}).state("xpMonthPld",{cache:!1,prefetchTemplate:!1,url:"/xpMonthPld",templateUrl:"templates/xpMonthPld.html",controller:"xpMonthPldCtrl"}).state("xpMonthPldDetailCtrl",{cache:!1,prefetchTemplate:!1,url:"/xpMonthPldDetail/:bidId",templateUrl:"templates/xpMonthPldDetail.html",controller:"xpMonthPldDetailCtrl"}).state("xpMeatB",{cache:!1,prefetchTemplate:!1,url:"/xpMeatB",templateUrl:"templates/xpMeatB.html",controller:"xpMeatBCtrl"}).state("xpSlot",{cache:!1,prefetchTemplate:!1,url:"/xpSlot",templateUrl:"templates/xpSlot.html",controller:"xpSlotCtrl"}).state("msgDetail",{cache:!1,prefetchTemplate:!1,url:"/msgDetail/:prd_Typ",templateUrl:"templates/msgDetail.html",controller:"msgDetailCtrl"}).state("helpCenter",{cache:!1,prefetchTemplate:!1,url:"/helpCenter",templateUrl:"templates/helpCenter.html",controller:"helpCenterCtrl"}).state("helpList",{cache:!1,prefetchTemplate:!1,url:"/helpList/:id",templateUrl:"templates/helpList.html",controller:"helpListCtrl"}).state("helpDetail",{cache:!1,prefetchTemplate:!1,url:"/helpDetail/:id",templateUrl:"templates/helpDetail.html",controller:"helpDetailCtrl"}).state("helpSearch",{cache:!1,prefetchTemplate:!1,url:"/helpSearch/:id",templateUrl:"templates/helpSearch.html",controller:"helpSearchCtrl"}).state("helpLists",{cache:!1,prefetchTemplate:!1,url:"/helpLists/:id/:name",templateUrl:"templates/helpLists.html",controller:"helpListsCtrl"}).state("newsList",{cache:!1,prefetchTemplate:!1,url:"/newsList",templateUrl:"templates/newsList.html",controller:"newsListCtrl"}).state("xpMeatDetail",{cache:!1,prefetchTemplate:!1,url:"/xpMeatDetail/:bidId/:bidName",templateUrl:"templates/xpMeatDetail.html",controller:"xpMeatDetailCtrl"}).state("borrowerDetail",{cache:!1,prefetchTemplate:!1,url:"/borrowerDetail/:lnNo",templateUrl:"templates/borrowerDetail.html",controller:"borrowerDetailCtrl"}).state("postLoanInformation",{cache:!1,url:"/postLoanInformation/:lnNo",templateUrl:"templates/postLoanInformation.html",controller:"postLoanInformationCtrl"}).state("lenderRisk",{cache:!1,url:"/lenderRisk/:num",templateUrl:"templates/lenderRisk.html",controller:"lenderRiskCtrl"}).state("accountM",{cache:!1,prefetchTemplate:!1,url:"/accountM",templateUrl:"templates/accountM.html",controller:"AccountMCtrl"}).state("userInfo",{cache:!1,prefetchTemplate:!1,url:"/userInfo",templateUrl:"templates/userInfo.html",controller:"UserInfoCtrl"}).state("memberCenter",{cache:!1,prefetchTemplate:!1,url:"/memberCenter",templateUrl:"templates/tab-memberCenter.html",controller:"MemberCenterCtrl"}).state("passwordM",{prefetchTemplate:!1,cache:!1,url:"/passwordM",templateUrl:"templates/passwordM.html",controller:"PasswordMCtrl"}).state("updateLoginPwd",{prefetchTemplate:!1,cache:!1,url:"/updateLoginPwd",templateUrl:"templates/updateLoginPwd.html",controller:"upPassCtrl"}).state("setJyPass",{prefetchTemplate:!1,cache:!1,url:"/setJyPass",templateUrl:"templates/setJyPass.html",controller:"setJyPassCtrl"}).state("tab.project",{cache:!1,url:"/project",views:{"tab-project":{templateUrl:"templates/project.html",controller:"projectCtrl"}}}).state("tab.market",{cache:!1,url:"/market",views:{"tab-market":{templateUrl:"templates/market.html",controller:"marketCtrl"}}}).state("tab.act",{cache:!0,url:"/act",views:{"tab-act":{templateUrl:"templates/act.html",controller:"actCtrl"}}}).state("register",{cache:!1,prefetchTemplate:!1,url:"/register",templateUrl:"templates/register.html",controller:"resCtrl"}).state("registerLoginStep11",{cache:!1,prefetchTemplate:!1,url:"/registerLoginStep11",params:{tel:""},templateUrl:"templates/registerLoginStep11.html",controller:"RegisterLoginStep11Ctrl"}).state("registerSuccess",{cache:!1,prefetchTemplate:!1,url:"/registerSuccess",templateUrl:"templates/registerSuccess.html",controller:"RegisterSuccessCtrl"}).state("bdDetail",{cache:!1,prefetchTemplate:!1,url:"/bdDetail:bdData",templateUrl:"templates/bdDetail.html",controller:"bdDetailCtrl"}).state("hdDetail",{cache:!1,prefetchTemplate:!1,url:"/hdDetail:hdData",templateUrl:"templates/hdDetail.html",controller:"hdDetailCtrl"}).state("tab.home",{url:"/home",cache:!1,views:{"tab-home":{templateUrl:"templates/tab-home.html",controller:"HomeCtrl"}}}).state("tab.find",{url:"/find",cache:!1,views:{"tab-find":{templateUrl:"templates/tab-find.html",controller:"FindCtrl"}}}).state("qbManage",{cache:!1,prefetchTemplate:!1,url:"/qbManage",templateUrl:"templates/qbManage.html",controller:"qbManageCtrl"}).state("qbZs",{cache:!1,prefetchTemplate:!1,url:"/qbZs:qbtel",templateUrl:"templates/qbZs.html",controller:"qbZcCtrl"}).state("qbJl",{cache:!1,prefetchTemplate:!1,url:"/qbJl",templateUrl:"templates/qbJl.html",controller:"qbJlCtrl"}).state("qbJlDetail",{cache:!1,prefetchTemplate:!1,url:"/qbJlDetail:qbData",templateUrl:"templates/qbJlDetail.html",controller:"qbJlDetailCtrl"}).state("upjymm",{cache:!1,prefetchTemplate:!1,url:"/upjymm",templateUrl:"templates/upjymm.html",controller:"upjymmCtrl"}).state("myewm",{cache:!1,prefetchTemplate:!1,url:"/myewm",templateUrl:"templates/myewm.html",controller:"myewmCtrl"}).state("bdFb",{cache:!1,prefetchTemplate:!1,url:"/bdFb",templateUrl:"templates/bdFb.html",controller:"bdFbCtrl"}).state("hdFb",{cache:!1,prefetchTemplate:!1,url:"/hdFb",templateUrl:"templates/hdFb.html",controller:"hdFbCtrl"}).state("fbJl",{cache:!1,prefetchTemplate:!1,url:"/fbJl",templateUrl:"templates/fbJl.html",controller:"fbJlCtrl"}).state("jbJl",{cache:!1,prefetchTemplate:!1,url:"/jbJl",templateUrl:"templates/jbJl.html",controller:"jbJlCtrl"}).state("jbrList",{cache:!1,prefetchTemplate:!1,url:"/jbrList",templateUrl:"templates/jbrList.html",controller:"jbrListCtrl"}).state("fbDetail",{cache:!1,prefetchTemplate:!1,url:"/fbDetail:fbData",templateUrl:"templates/fbDetail.html",controller:"fbDetailCtrl"}).state("msgCenter",{cache:!1,prefetchTemplate:!1,url:"/msgCenter",templateUrl:"templates/msgCenter.html",controller:"msgCenterCtrl"}).state("meAct",{cache:!1,prefetchTemplate:!1,url:"/meAct",templateUrl:"templates/meAct.html",controller:"meActCtrl"}).state("actManage",{cache:!1,prefetchTemplate:!1,url:"/actManage",templateUrl:"templates/actManage.html",controller:"actManageCtrl"}).state("meJoinAct",{cache:!1,prefetchTemplate:!1,url:"/meJoinAct",templateUrl:"templates/meJoinAct.html",controller:"meJoinActCtrl"}).state("mbqSell",{cache:!1,prefetchTemplate:!1,url:"/mbqSell",templateUrl:"templates/mbqSell.html",controller:"mbqSellCtrl"}).state("mebqSell",{cache:!1,prefetchTemplate:!1,url:"/mebqSell",templateUrl:"templates/mebqSell.html",controller:"mebqSellCtrl"}).state("meScList",{cache:!1,prefetchTemplate:!1,url:"/meScList",templateUrl:"templates/meScList.html",controller:"meScListCtrl"}).state("rcDetail",{cache:!1,prefetchTemplate:!1,url:"/rcDetail:rcData",templateUrl:"templates/rcDetail.html",controller:"rcDetailCtrl"}),$urlRouterProvider.otherwise("/tab/home")}),angular.module("starter.directive",[]).directive("contentScroll",function($rootScope){return{link:function(scope,elements,attrs,controller){console.log("bbbbb"),console.log(elements[0]),ionic.Platform.isAndroid()&&(elements[0].style.overflowY="auto",elements[0].style.overflowX="hidden")}}}).directive("progress",function($rootScope){return{restrict:"E",replace:!0,template:'<span class="g-bar-unfill"> <span class="bar-fill"></span><span class="progressNum"></span></span>'}}).directive("progressval",function($rootScope,$timeout){return function(scope,element,attr){var $progressFill=element.children()[0],$progressNum=element.children()[1];attr.progressval>100?$progressFill.style.width="100%":$progressFill.style.width=attr.progressval+"%",$progressNum.innerHTML=attr.progressval+"%"}}).directive("getmsgcode1",function($rootScope,$interval,req,reqRoot,$http,msgCode,tip){return{restrict:"E",replace:!0,scope:{callback:"&"},template:'<button class="button-getMsgCode" ng-class="paraclass" ng-click="getCode()" ng-bind="paracont">获取验证码</button>',link:function($scope,$element,attr){$scope.paracont="获取验证码",$scope.paraclass="sendMsg",msgCode.isCount=!1,$scope.getCode=function(){if(!msgCode.isCount){$scope.callback&&$scope.callback();if(!/^1[2,3,4,5,6,7,8,9,0][0-9]{9}$/.test(attr.tel))return;$scope.paraevent=!0;var second=60,timePromise=void 0;timePromise=$interval(function(){second<=0?($interval.cancel(timePromise),timePromise=void 0,second=60,$scope.paracont="重发验证码",$scope.paraclass="sendMsg",$scope.paraevent=!0,msgCode.isCount=!1):($scope.paracont=second+"秒后可重发",$scope.paraclass="sendMsgIng",second--,msgCode.isCount=!0)},1e3,100)}$scope.$on("$destroy",function(){msgCode.isCount=!1,timePromise&&$interval.cancel(timePromise)})},"auto"==attr.init&&$scope.getCode()}}}).directive("getmsgcode",function($rootScope){return{restrict:"E",replace:!0,template:'<button class="button-getMsgCode" ng-class="paraclass" ng-click="getCode()" ng-bind="paracont">获取验证码</button>',controller:function($scope,$element,$interval,req,reqRoot,$http,msgCode){$scope.paracont="获取验证码",$scope.paraclass="sendMsg",msgCode.isCount=!1,$scope.getCode=function(){if(!msgCode.isCount){$scope.paraevent=!0;var second=60,timePromise=void 0;timePromise=$interval(function(){second<=0?($interval.cancel(timePromise),timePromise=void 0,second=60,$scope.paracont="重发验证码",$scope.paraclass="sendMsg",$scope.paraevent=!0,msgCode.isCount=!1):($scope.paracont=second+"秒后可重发",$scope.paraclass="sendMsgIng",second--,msgCode.isCount=!0)},1e3,100)}$scope.$on("$destroy",function(){msgCode.isCount=!1,timePromise&&$interval.cancel(timePromise)})}},link:function(scope,element,attr){attr.tel}}}).directive("hideTabs",function($rootScope,$window,$timeout){return function(scope,element,attributes){scope.$on("$ionicView.beforeEnter",function(){scope.$watch(attributes.hideTabs,function(_value){var value;_value.indexOf&&_value.indexOf("-")>0&&($rootScope.ionHeaderBarSty="ionBarSty"+_value.substring(_value.indexOf("-")+1)),value=_value.indexOf&&_value.indexOf("-")>0?_value.substring(0,_value.indexOf("-")):_value,$rootScope.hideTabs=value})}),scope.$on("$ionicView.beforeLeave",function(){$rootScope.hideTabs=!1})}}).directive("wechartShare",function(state,$rootScope,$ionicPopup,$timeout,sqLiteLoginInfo,tip){return{link:function(scope,elem,attr){scope.shareSuccess=function(){var alertPopup=$ionicPopup.alert({title:"提示",template:"分享成功",okText:"确定"});alertPopup.then(function(){scope.popShow.close()}),$timeout(function(){alertPopup.close()},2e3)},scope.shareFailed=function(reason){var alertPopup=$ionicPopup.alert({title:"提示",template:"分享失败: "+reason,okText:"确定"});$timeout(function(){alertPopup.close()},2e3)},scope.shareSpace=function(){console.log(attr);try{Wechat.isInstalled(function(installed){if(!installed)return tip("没有安装微信，请先安装微信！"),!1;sqLiteLoginInfo.userInfo.get(function(userInfo){var webpageurl="";webpageurl="1"==attr.hasurl?attr.webpageurl:"https://m.he-pai.cn/wechat/#/exclusiveRegister/"+localStorage.prsCd+"/"+userInfo.ciNm,Wechat.share({message:{title:attr.sharetitle,description:attr.sharedescription,thumb:"www/img/wechatShare.png",media:{type:Wechat.Type.WEBPAGE,webpageUrl:webpageurl}},scene:Wechat.Scene.TIMELINE},function(){scope.shareSuccess()},function(reason){scope.shareFailed(reason)})})},function(reason){scope.shareFailed(reason)})}catch(e){}},scope.shareFriend=function(){try{Wechat.isInstalled(function(installed){if(!installed)return tip("没有安装微信，请先安装微信！"),!1;sqLiteLoginInfo.userInfo.get(function(userInfo){var webpageurl="";webpageurl="1"==attr.hasurl?attr.webpageurl:"https://m.he-pai.cn/wechat/#/exclusiveRegister/"+localStorage.prsCd+"/"+userInfo.ciNm,Wechat.share({message:{title:attr.sharetitle,description:attr.sharedescription,thumb:"www/img/wechatShare.png",media:{type:Wechat.Type.WEBPAGE,webpageUrl:webpageurl}},scene:Wechat.Scene.SESSION},function(){scope.shareSuccess()},function(reason){scope.shareFailed(reason)})})},function(reason){scope.shareFailed(reason)})}catch(e){}},scope.lookDis=function(){scope.popShow.close(),state.go("inviteFriends")},elem.bind("click",function(){scope.popShow=$ionicPopup.show({template:'<div class="g-ta-c g-pt-10"><p class="titlep">分享活动，共创盈利！</p><div><ul class="g-mb-10"><li class="g-c99" ng-click="shareSpace()"><img src="img/frends_img01.png" alt="tu">朋友圈</li><li class="g-c99" ng-click="shareFriend()"><img src="img/frends_img02.png" alt="tu">微信好友</li></ul></div></div>',cssClass:"recommend-pop",title:"",scope:scope,buttons:[{text:"取消"}]})})}}}).directive("slideScroll",function($window,$timeout){return{restrict:"AE",scope:{noticelist:"="},link:function(scope,element,attr){scope.$watch(attr.noticelist,function(newvalue,oldvalue){var i=1,length=element[0].children.length;if(0!=length){$window.innerWidth,element[0].children[0].children[0].offsetWidth;setInterval(function(){i==length&&(i=0,element[0].style.top="0px");var topscorll=-24*i;element[0].children[i].children[0].offsetWidth;!function(topscorll){var feelTimer=setInterval(function(){element[0].style.top=parseInt(element[0].style.top)+-10+"px",parseInt(element[0].style.top)<=topscorll&&(element[0].style.top=topscorll+"px",window.clearInterval(feelTimer))},100)}(topscorll),i++},3e3)}})}}}).directive("keyboard",function($compile,$rootScope){return{restrict:"AE",transclude:!0,template:"",scope:{myName:"=name",password:"=password",ngBlur:"&"},link:function(scope,element,attrs){var numlist1=[["1","2","3"],["4","5","6"],["7","8","9"],[".","0","back"]],numlist2=[["1","2","3"],["4","5","6"],["7","8","9"],["","0","back"]],numlist=[["1","2","3"],["4","5","6"],["7","8","9"],["ABC","0","back"]],wordlist=[["q","w","e","r","t","y","u","i","o","p"],["a","s","d","f","g","h","j","k","l"],["up","z","x","c","v","b","n","m","back"],["123","space","#+="]],speCharslist=[["!","@","#","$","%","^","&","*","(",")"],["&acute;","&quot;","=","_",":",";","?","~","|","·"],["+","-","\\","/","[","]","{","}","back"],["123",",",".","&lt;","&gt;","€","￡","¥","ABC"]];scope.numberShow="show",scope.characterShow="hidden",scope.scShow="hidden",scope.myName="",scope.password="",scope.lowerOrUp="lower";var calculator="",boardtype=attrs.boardtype;$rootScope.placeTxt=attrs.placeholder,scope.render=function(){calculator='<div class="keyboard" class="ngcalculator_area" ng-click="wrapperBlank()"><div class="title"></span><span class="g-c66 title-text">青色国际安全输入</span><span class="finish" ng-click="finish($event)">完成</span></div><div class="con"><ul class="number {{numberShow}}" ng-class="{{numberShow}}"><li>';var common=function(list,type){angular.forEach(list,function(v,k){calculator+="<li>",angular.forEach(v,function(v1,k1){"back"==v1?calculator+='<span class="ion-backspace-outline backColor" ng-click="change(\''+v1+"',$event)\"></span>":"up"==v1?calculator+='<span class="ion-arrow-up-a" ng-click="change(\''+v1+"',$event)\"></span>":"ABC"==v1||"123"==v1||"#+="==v1?calculator+="<span ng-click=\"change('"+v1+"',$event)\">"+v1+"</span>":"space"==v1?calculator+="<span>"+v1+"</span>":""==v1?calculator+='<span class="nullColor"></span>':"\\"==v1?(scope.key=v1,calculator+='<span ng-click="clickKey(key,$event)">'+v1+"</span>"):calculator+=type?'<span class="{{lowerOrUp}}" ng-click="clickKey(\''+v1+"',$event)\">"+v1+"</span>":'<span class="word" ng-click="clickKey(\''+v1+"',$event)\">"+v1+"</span>"}),calculator+="</li>"})};common("v1"==boardtype?numlist1:"v2"==boardtype?numlist2:numlist,!1),calculator+='</ul><ul class="character hidden {{characterShow}}">',common(wordlist,!0),calculator+='</ul><ul class="specialCharacter hidden {{scShow}}">',common(speCharslist,!1),calculator+="</ul></div></div>"},scope.wrapperBlank=function(){event.stopPropagation()},scope.initKeyboardStyle=function(){scope.numberShow="show",scope.characterShow="hidden",scope.scShow="hidden",scope.lowerOrUp="lower"};var node=document.getElementsByClassName("keyboard");element.bind("focus",function(e){event.stopPropagation(),$rootScope.placeTxt=attrs.placeholder,element.addClass("activeInput");for(var i=0;i<node.length;i++)node[i].remove();scope.render(),scope.initKeyboardStyle(),calculator=$compile(calculator)(scope),document.body.appendChild(calculator[0]),document.activeElement.blur(),angular.element(element.next())[0].style.display="inline-block"}),setTimeout(function(){"true"==attrs.focus&&element[0].focus()},500),document.getElementsByTagName("body")[0].onclick=function(e){scope.finish(),scope.cursor();var ele=document.getElementsByClassName("activeInput")[0];ele&&0==ele.value.length&&(ele.setAttribute("placeholder",$rootScope.placeTxt),angular.element(ele).removeClass("activeInput"))},scope.finish=function(e){event.stopPropagation(),scope.initKeyboardStyle();var node=document.getElementsByClassName("keyboard");angular.element(node).remove(),scope.cursor(),scope.initPlace(),element.removeClass("activeInput"),void 0!==scope.ngBlur()&&scope.ngBlur()},scope.cursor=function(){for(var node1=document.getElementsByClassName("imitateCursor"),i=0;i<node1.length;i++)node1[i].style.display="none"},scope.clickKey=function(word,e){if(event.stopPropagation(),angular.element(e.target).addClass("keydown"),"up"==scope.lowerOrUp?(scope.myName+=word.toUpperCase(),scope.password+=word.toUpperCase()):(scope.myName+=word.toLowerCase(),scope.password+=word.toLowerCase()),void 0!==attrs.password&&(scope.myName=scope.myName.replace(/./g,"•")),"v1"==boardtype){var returnText=scope.myName;if(!returnText)return;var regStrs=[["^0(\\d+)$","$1"],["[^\\d\\.]+$",""],["\\.(\\d?)\\.+",".$1"],["^(\\d+\\.\\d{2}).+","$1"]];for(i=0;i<regStrs.length;i++){var reg=new RegExp(regStrs[i][0]);returnText=returnText.replace(reg,regStrs[i][1])}scope.myName=returnText}setTimeout(function(){angular.element(e.target).removeClass("keydown")},50)},scope.initPlace=function(){0==scope.myName.length&&element[0].setAttribute("placeholder",attrs.placeholder)},scope.change=function(tag,e){switch(e.stopPropagation(),tag){case"123":scope.numberShow="show",scope.characterShow="hidden",scope.scShow="hidden";break;case"ABC":scope.numberShow="hidden",scope.characterShow="show",scope.scShow="hidden";break;case"#+=":scope.numberShow="hidden",scope.characterShow="hidden",scope.scShow="show";break;case"back":scope.myName.length>=1?(scope.myName=scope.myName.substring(0,scope.myName.length-1),scope.password=scope.password.substring(0,scope.password.length-1)):(scope.myName="",scope.password=""),scope.initPlace();break;case"up":"lower"==scope.lowerOrUp?scope.lowerOrUp="up":scope.lowerOrUp="lower"}}}}}),angular.module("starter",["ionic","ngCordova","starter.controllers","starter.services","starter.config","starter.router","starter.directive","starter.unit","ionic-citypicker"]).run(function($ionicPlatform,$location,$rootScope,$window,$cordovaToast,$cordovaSQLite,$timeout,$q,$ionicHistory,$ionicLoading,$ionicPopup,$cordovaStatusbar,$ionicGesture,$cordovaInAppBrowser,$ionicActionSheet,$cordovaFileTransfer,$cordovaFile,$cordovaFileOpener2,$http,$cordovaNetwork,$state,state,req,serveRoot,configFile,sqLiteLoginInfo,tip,jpushService,backMore,reqRoot,httpService){$rootScope.logined=0,$rootScope.hpRegister="0",$rootScope.ionHeaderBarSty="orange";var loadingStatus,isIOS=ionic.Platform.isIOS();ionic.Platform.isAndroid();function onHardwareMenuKeyDown(){$ionicActionSheet.show({titleText:"检查更新",buttons:[{text:"关于"}],destructiveText:"检查更新",cancelText:"取消",cancel:function(){},destructiveButtonClicked:function(){checkUpdate()},buttonClicked:function(index){}}),$timeout(function(){hideSheet()},2e3)}localStorage.isIOSPlatform=ionic.Platform.isIOS(),$rootScope.chcpFn=function(){window.cordova&&window.cordova.plugins&&window.cordova.plugins.Keyboard&&(navigator.splashscreen.hide(),cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0),window.indexedDB?console.log("I'm in WKWebView!"):console.log("I'm in UIWebView"))},$ionicPlatform.ready(function(){$rootScope.chcpFn(),document.addEventListener("menubutton",onHardwareMenuKeyDown,!1),sqLiteLoginInfo.initDb(),window.StatusBar&&"android"==cordova.platformId&&StatusBar.backgroundColorByHexString("#31a492");try{}catch(e){}}),$rootScope.viewToLogin=function(){state.go("login")},$rootScope.exitLogin=function(){sqLiteLoginInfo.exitLogin(function(){state.go("tab.home")})},$rootScope.tip=function(txt){var tpl='<span class="animated cpt-toast bounceOutDown-hastrans" style="position: fixed;left: 50%; padding: 10px 20px; font-size: 14px; border-radius: 6px; color: rgb(255, 255, 255); top: 50%; z-index: 1000001; transform: translate3d(-50%, -50%, 0px); animation-duration: 0.5s; background: rgba(7, 17, 27, 0.658824);">'+txt+"</span>";document.getElementById("zjtg").innerHTML=tpl,setTimeout(function(){document.getElementById("zjtg").innerHTML="","该账号已在其他设备上登陆,请重新登陆账号"==txt&&(localStorage.clear(),state.go("login"))},2e3)},$rootScope.inAppBrowserRef={getInstance:function(){return cordova.InAppBrowser},close:function(){$cordovaInAppBrowser.close(),_ref.executeSript({file:"myscript.js"})},openUrl:function(url,eventObj){if(cordova.InAppBrowser){var _ref;if(url.indexOf("bbs.he-pai.cn")>0)if(url.substring(url.indexOf("&id=")+4).length>0);else{var _url;_url="https://bbs.he-pai.cn/user_api/api.php?go=logout&app=true&redirectUrl="+url,_ref=this.getInstance().open(encodeURI(_url),"_blank","location=no,toolbar=yes,toolbarposition=top,closebuttoncaption=关闭")}else _ref=url.indexOf("m.ihefu.com")>0?this.getInstance().open(encodeURI(url),"_blank","location=no,toolbar=no"):url.indexOf("isFromNative")>0?""!=$rootScope.sessionId&&void 0!=$rootScope.sessionId?this.getInstance().open(encodeURI(url+="&signKey="+$rootScope.signKey+"&sessionId="+$rootScope.sessionId+"&time="+(new Date).getTime()),"_blank","location=no,toolbar=yes,toolbarposition=top,closebuttoncaption=关闭"):this.getInstance().open(encodeURI(url),"_blank","location=no,toolbar=yes,toolbarposition=top,closebuttoncaption=关闭"):url.indexOf("wxhb/xnhb/2018augustActivityKxj.html")>0?this.getInstance().open(encodeURI(url),"_system","location=no,toolbar=yes,toolbarposition=top,closebuttoncaption=关闭"):this.getInstance().open(encodeURI(url),"_blank","location=no,toolbar=yes,toolbarposition=top,closebuttoncaption=关闭");_ref.addEventListener("loadstart",function(event){eventObj&&eventObj.loadstart&&eventObj.loadstart(_ref);var _url=event.url;if(_url.indexOf("m.he-pai.cn/wechat/#/?")>=0){var pras=_url.split("?")[1],pra=pras&&pras.split("&"),pra0=pra&&pra[0],pra1=pra&&pra[1];"sessionId"==pra0.split("=")[0]?pra0.split("=")[1]:"signKey"==pra0.split("=")[0]&&pra0.split("=")[1],"sessionId"==pra1.split("=")[0]?pra1.split("=")[1]:"signKey"==pra1.split("=")[0]&&pra1.split("=")[1],_ref.close(),state.go("tab.home")}_url.indexOf("m.he-pai.cn/wechat/#/login")>=0&&(_ref.close(),state.go("login")),_url.indexOf("http://39.97.234.111/rest/success")>=0&&(_ref.close(),state.go("memberCenter")),_url.indexOf("m.he-pai.cn/wechat/#/register")>=0&&(_ref.close(),$rootScope.hpRegister="3",state.go("login")),_url.indexOf("m.he-pai.cn/adv")>=0&&(_ref.close(),state.go("tab.home")),_url.indexOf("m.he-pai.cn/wechat/#/riskapp")>=0&&(_ref.close(),state.go("tab.memberCenter")),_url.indexOf("platformapp")>=0&&(_ref.close(),state.go("tab.home")),_url.indexOf("pwdRetUrl.do")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),req.deviceInfo().then(function(deviceInfo){var param={sessionId:deviceInfo.sessionId,channel:"000001"};httpService("Z017",param).then(function(data){"0"==data.returnCode&&(localStorage.pwdsetflag="1",tip("设置交易密码成功"),"tab.capitalSuccess"!=$ionicHistory.currentView().stateName?state.go("tab.capitalSuccess"):$rootScope.$broadcast("refreshCapitalSuccess"))})})),_url.indexOf("pinSettingJson-failed.html")>=0&&_url.indexOf("retUrl")<0&&$timeout(function(){_ref.close(),tip("交易密码设置失败，请稍后重试！"),state.go("tab.memberCenter")},3e3),_url.indexOf("https://m.he-pai.cn/wechat/#/memberCenter")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),state.go("tab.memberCenter")),_url.indexOf("hpweb/memberCenter/memberCenter/payRetUrl.do")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),state.go("tab.memberCenter")),_url.indexOf("successInvestment.do")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),req.deviceInfo().then(function(deviceInfo){var param={sessionId:deviceInfo.sessionId,orderId:$rootScope.orderId};httpService("IM400",param).then(function(data){"0"==data.returnCode?state.go("tab.investSuccess",{msg:data.returnMsg}):tip(data.returnMsg)})})),_url.indexOf("https://m.he-pai.cn/wechat/#/bidService")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),"tab.capitalSuccess"!=$ionicHistory.currentView().stateName?state.go("tab.capitalSuccess"):$rootScope.$broadcast("refreshCapitalSuccess")),_url.indexOf("hpweb/memberCenter/memberCenter/bankDepositManagement.do")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),$rootScope.$broadcast("reloadAutoBid")),_url.indexOf("hpweb/memberCenter/memberCenter/index.html")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),$rootScope.$broadcast("reloadAutoBid")),_url.indexOf("http://he-pai.udesk.cn/hc")>=0&&_ref.close(),_url.indexOf("openAccountAppJson-failed.html")>=0&&_url.indexOf("retUrl")<0&&$timeout(function(){_ref.close(),$timeout(function(){tip("开通存管失败，请稍后重试！")},1e3)},2e3),_url.indexOf("https://m.he-pai.cn/wechat/#/capitalSuccess")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),localStorage.isOpen="0",sqLiteLoginInfo.userInfo.get(function(userInfo){userInfo.mbPhn=$rootScope.mbPhn,sqLiteLoginInfo.userInfo.set(userInfo)}),$rootScope.$broadcast("refreshCapitalSuccess"),state.go("tab.capitalSuccess")),_url.indexOf("https://m.he-pai.cn/wechat/#/resetZcTradePwd")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),state.go("tab.resetZcTradePwd")),_url.indexOf("https://m.he-pai.cn/wechat/#/banksInfoZc")>=0&&_url.indexOf("retUrl")<0&&(_ref.close(),$rootScope.$broadcast("refreshbanksInfoZc"))}),_ref.addEventListener("loadstop",function(event){var _url=event.url;(_url.indexOf(encodeURI("签署成功"))>=0||_url.indexOf("llpayh5/index.html#/success")>=0||_url.indexOf("pay/success.html")>=0)&&(tip("3秒后跳回商户",function(){sqLiteLoginInfo.userInfo.get(function(userInfo){userInfo.isSignCertAuth="1",sqLiteLoginInfo.userInfo.set(userInfo)}),state.go("tab.memberCenter")}),setTimeout(function(){_ref.close()},3e3)),_url.indexOf("llpayh5/index.html#/error")>=0&&(tip("3秒后跳回商户",function(){state.go("quickPayment")}),setTimeout(function(){_ref.close()},3e3)),_url.indexOf("m.he-pai.cn/wechat/#/login")>=0&&(_ref.close(),state.go("login")),(_url.indexOf("m.he-pai.cn/wechat/#/bidList/1/1/0")>=0||_url.indexOf("actbidlist")>=0)&&(_ref.close(),state.go("tab.bidList",{bidId:"1",querytype:"1"})),_url.indexOf("pay/fail.html")>=0&&(tip("3秒后跳回商户",function(){state.go("largePayment")}),setTimeout(function(){_ref.close()},3e3)),_url.indexOf("https://m.he-pai.cn/wxhb/xnhb/2018newsAct")>=0&&(_ref.close(),state.go("tab.home")),eventObj&&eventObj.loadstop&&eventObj.loadstop(_ref),$rootScope.loadingHide()}),_ref.addEventListener("loaderror",function(){eventObj&&eventObj.loaderror&&eventObj.loaderror(_ref),$rootScope.loadingHide()}),_ref.addEventListener("exit",function(event){eventObj&&eventObj.exit&&eventObj.exit(_ref),$rootScope.loadingHide()})}}},$rootScope.toView=function(_stateName,_stateParam,_disableBack){state.go(_stateName,_stateParam,_disableBack)},$rootScope.loadingShow=function(){loadingStatus=1,$ionicLoading.show({maxWidth:200,noBackdrop:!0,template:'<style>.loading-container .loading{padding:0px!important;background-color: rgba(0, 0, 0, 0);}</style><img style="border-radius:5px;opacity:0.8;" src="img/loading.gif" width="500px"/>'});var time=0,backtime=setInterval(function(){time>10&&tip("网络连接失败，请检查您的网络情况",function(){clearInterval(backtime),$ionicLoading.hide()}),0==loadingStatus&&clearInterval(backtime),++time},1e3)},$rootScope.loadingHide=function(){loadingStatus=0,$ionicLoading.hide()},$rootScope.goBackView=function(e){var node=document.getElementsByClassName("keyboard");angular.element(node).remove();var stateName=$ionicHistory.currentView().stateName;if(e&&e.preventDefault(),!(stateName in backMore)){if($rootScope.registerToCapSup&&"tab.capitalSupervision"==stateName)return $rootScope.registerToCapSup=!1,void state.go("tab.memberCenter");var _backView,_firstView,_historyViewLst,_viewsArr,time,filterPage,backView=(_firstView="",_historyViewLst=$ionicHistory.viewHistory().views,_viewsArr=[],time=0,filterPage=["tab.investHly","tab.invest","tab.investWly","tab.memberCenter","tab.assetStatistics","tab.capitalFlow","investTickets","tab.accountM","tab.planDetail","tab.quitHly","tab.assetStatistics","tab.updateLoginPwd","tab.updateTradePwd","tab.resetTradePwd","tab.resetTradePwdContent","tab.updatePhn","tab.updatePhnStep2","withdraw","withdrawFee","withdrawIptPwd","quickPayment","wechatPayment","tab.myInvest","tab.myInvestNew","tab.investDetail","record","recordInfo","tab.investZzb","tab.myTasks","passwordM"].join(),function(currentView){if(currentView&&(!$ionicHistory.currentView().backViewId||-1==filterPage.indexOf(currentView.stateName)))return _viewsArr[0];if(currentView)++time,_backView=_historyViewLst[currentView.backViewId];else{for(var view in _firstView=$ionicHistory.currentView(),_viewsArr=[],$ionicHistory.viewHistory().views)_viewsArr.push($ionicHistory.viewHistory().views[view]);if(_viewsArr.length,!_firstView.backViewId)return _viewsArr[0];_backView=_historyViewLst[_firstView.backViewId]}try{return _backView.stateName==_firstView.stateName||2==time?_viewsArr[0]:filterPage.indexOf(_backView.stateName)>=0?backView(_historyViewLst[_backView.backViewId]):_backView}catch(e){return _viewsArr[0]}});if("/tab/home"==$location.path())if($rootScope.backButtonPressedOnceToExit){try{window.plugins.umengAnalyticsPlugin.onKillProcess(),isIOS&&window.plugins.maaSdkPlugin.stop()}catch(e){}ionic.Platform.exitApp()}else $rootScope.backButtonPressedOnceToExit=!0,$cordovaToast.showShortTop("再按一次退出系统"),setTimeout(function(){$rootScope.backButtonPressedOnceToExit=!1},2e3);else if($ionicHistory.backView()){if(localStorage.token)$ionicHistory.goBack();else backView().go()}else if($rootScope.backButtonPressedOnceToExit){try{window.plugins.umengAnalyticsPlugin.onKillProcess(),isIOS&&window.plugins.maaSdkPlugin.stop()}catch(e){}ionic.Platform.exitApp(),isIOS&&window.plugins.maaSdkPlugin.stop()}else $rootScope.backButtonPressedOnceToExit=!0,$cordovaToast.showShortTop("再按一次退出系统"),setTimeout(function(){$rootScope.backButtonPressedOnceToExit=!1},2e3);return!1}$ionicHistory.goBack(backMore[stateName])},$ionicPlatform.registerBackButtonAction(function(e){var stateName=$ionicHistory.currentView().stateName;if("gesturePwd"==stateName)tip("请输入手势密码");else{if(stateName in backMore)return void $ionicHistory.goBack(backMore[stateName]);$rootScope.goBackView(e)}},101)}).config(function($stateProvider,$urlRouterProvider,$ionicConfigProvider){$ionicConfigProvider.platform.ios.tabs.style("standard"),$ionicConfigProvider.platform.ios.tabs.position("bottom"),$ionicConfigProvider.platform.android.tabs.style("standard"),$ionicConfigProvider.platform.android.tabs.position("standard"),$ionicConfigProvider.navBar.alignTitle("center"),$ionicConfigProvider.views.swipeBackEnabled(!1)});